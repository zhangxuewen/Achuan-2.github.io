<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>The Python Challenge Daily Record | Achuan-2</title><meta name="keywords" content="python基础练习"><meta name="author" content="Achuan-2,achuan-2@outlook.com"><meta name="copyright" content="Achuan-2"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Python Challenge是首个谜语编程网站。挑战者需要连续挑战33个需要编程才能解开的谜题以锻炼自己的编程能力。"><meta property="og:type" content="article"><meta property="og:title" content="The Python Challenge Daily Record"><meta property="og:url" content="https://achuan-2.github.io/posts/c134.html"><meta property="og:site_name" content="Achuan-2"><meta property="og:description" content="Python Challenge是首个谜语编程网站。挑战者需要连续挑战33个需要编程才能解开的谜题以锻炼自己的编程能力。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201225124223-2020-12-25.png"><meta property="article:published_time" content="2020-11-14T03:18:09.000Z"><meta property="article:modified_time" content="2021-10-04T15:12:59.295Z"><meta property="article:author" content="Achuan-2"><meta property="article:tag" content="python基础练习"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201225124223-2020-12-25.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://achuan-2.github.io/posts/c134"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#121212",position:"top-center"},source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isanchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"The Python Challenge Daily Record",isPost:!0,isHome:!1,isHighlightShrink:!0,isToc:!0,postUpdate:"2021-10-04 23:12:59"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));const n=saveToLocal.get("global-font-size");void 0!==n&&document.documentElement.style.setProperty("--global-font-size",n+"px");const a=()=>{GLOBAL_CONFIG_SITE.isHome&&/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")};a(),document.addEventListener("pjax:complete",a)})(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-butterfly-clock/lib/clock.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.1.6/css/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-butterfly-swiper/lib/swiperstyle.css"><meta name="generator" content="Hexo 5.2.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="Achuan-2" type="application/atom+xml"><link rel="stylesheet" href="/css/prism-tomorrow.css"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="wizard-scene"><div class="wizard-objects"><div class="wizard-square"></div><div class="wizard-circle"></div><div class="wizard-triangle"></div></div><div class="wizard"><div class="wizard-body"></div><div class="wizard-right-arm"><div class="wizard-right-hand"></div></div><div class="wizard-left-arm"><div class="wizard-left-hand"></div></div><div class="wizard-head"><div class="wizard-beard"></div><div class="wizard-face"><div class="wizard-adds"></div></div><div class="wizard-hat"><div class="wizard-hat-of-the-hat"></div><div class="wizard-four-point-star --first"></div><div class="wizard-four-point-star --second"></div><div class="wizard-four-point-star --third"></div></div></div></div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>Archives</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>Categories</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>Tags</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i> <span>List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://sunguoqi.com/box/clock/index/"><i class="fa-fw fas fa-clock"></i> <span>Clock</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>About</span></a></div><div class="menus_item"><a class="site-page" href="/random/"><i class="fa-fw fas fa-dice-six"></i> <span>Random</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201225124223-2020-12-25.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Achuan-2</a></span><div id="he-plugin-simple"></div><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>Archives</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>Categories</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>Tags</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i> <span>List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://sunguoqi.com/box/clock/index/"><i class="fa-fw fas fa-clock"></i> <span>Clock</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>About</span></a></div><div class="menus_item"><a class="site-page" href="/random/"><i class="fa-fw fas fa-dice-six"></i> <span>Random</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">The Python Challenge Daily Record</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-11-14T03:18:09.000Z" title="发表于 2020-11-14 11:18:09">2020-11-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-10-04T15:12:59.295Z" title="更新于 2021-10-04 23:12:59">2021-10-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/">Python</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="The Python Challenge Daily Record"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/">Python Challenge</a>是首个谜语编程网站。挑战者需要连续挑战33个需要编程才能解开的谜题以锻炼自己的编程能力。</p><p>该网站建立于2005年，至今已经有三百多万位访客浏览并尝试解决该网站的谜题。</p><blockquote><p>Python Challenge is a game in which each level can be solved by a bit of (Python) programming.</p><p>The Python Challenge was written by Nadav Samet.</p><p>All levels can be solved by straightforward and very short scripts.(well, except of level 32.)</p><p>Python Challenge welcomes programmers of all languages. You will be able to solve most riddles in any programming language, but some of them will require Python.</p><p>Sometimes you’ll need extra modules. All can be downloaded for free from the internet.</p><p>It is just for fun - nothing waits for you at the end.</p><p>Keep the scripts you write - they might become useful.</p></blockquote><p>希望每天都能坚持刷题哈！🚩(然而并没有…)</p><h2 id="level-0-2020-10-28">level_0_2020.10.28</h2><p>Link: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/0.html">http://www.pythonchallenge.com/pc/def/0.html</a><br><img src="https://i.loli.net/2020/11/14/HC8xwDEoN4hPyvn.png" alt="热身关"><br><strong>🖊Learned</strong><br>代码的强大<br>回顾一下乘方运算(这可能是python语法里最熟的之一了)</p><p><strong>🔑Solution</strong><br>就按照图片给的乘方算吧!</p><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#! level 0</span></span><br><span class="line">print(<span class="number">2</span>**<span class="number">38</span>)</span><br><span class="line"><span class="comment"># 274877906944</span></span><br></pre></td></tr></tbody></table></figure><h2 id="level-1-map-2020-10-27">level_1_map_2020.10.27</h2><p>Link : <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/274877906944.html">http://www.pythonchallenge.com/pc/def/274877906944.html</a><br><img src="https://i.loli.net/2020/11/14/Y2EqrAsKB9lHtQi.png" alt="level_1"><br><strong>🖊Learned</strong><br>其实还可以用map方法，但是需要用if判断，不然空格括号也被翻译了。<br><code>ord(char)</code>:返回char的ASCII序列值<br><code>chr(num)</code>:返回ASCII码对应的字符</p><p><strong>🔑Solution</strong><br>根据所给图片提示,发现K和M,O和Q,E和G都差两个字母,所以应该就是做一个映射表,把给的字符翻译出来</p><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line">orginal_str = <span class="string">"g fmnc wms bgblr rpylqjyrc gr zw fylb. rfyrq ufyr amknsrcpq ypc dmp. bmgle \</span></span><br><span class="line"><span class="string">gr gl zw fylb gq glcddgagclr ylb rfyr'q ufw rfgq rcvr gq qm jmle. sqgle qrpgle.kyicrpylq() gq pcamkkclbcb. lmu ynnjw ml rfc spj."</span></span><br><span class="line"></span><br><span class="line">trans = <span class="built_in">str</span>.maketrans(string.ascii_lowercase,</span><br><span class="line">                      string.ascii_lowercase[<span class="number">2</span>:] + string.ascii_lowercase[:<span class="number">2</span>])</span><br><span class="line"><span class="comment"># string.ascii_lowercase = abcdefghijklmnopqrstuvwxyz</span></span><br><span class="line"><span class="comment"># string.ascii_lowercase[2:] + string.ascii_lowercase[:2] cdefghijklmnopqrstuvwxyzab</span></span><br><span class="line">print(string.ascii_lowercase[<span class="number">2</span>:] + string.ascii_lowercase[:<span class="number">2</span>])</span><br><span class="line">changed_str = orginal_str.translate(trans)</span><br><span class="line">print(changed_str)</span><br><span class="line"><span class="comment"># output i hope you didnt translate it by hand. thats what computers are for. doing it in by hand is inefficient and that's why this text is so long.</span></span><br><span class="line"><span class="comment"># using string.maketrans() is recommended. now apply on the url.</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'map'</span>.translate(trans))</span><br><span class="line"><span class="comment"># ocr</span></span><br></pre></td></tr></tbody></table></figure><h2 id="level-2-ocr-2020-10-28">level_2_ocr_2020.10.28</h2><p>Link: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/ocr.html">http://www.pythonchallenge.com/pc/def/ocr.html</a><br><img src="https://i.loli.net/2020/11/14/RL6ucAMmJ3k4vNn.png" alt="level_2"><br><strong>🖊Learned</strong><br><strong>request和urllib的区别：</strong><br>我们在使用python爬虫时，需要模拟发起网络请求，主要用到的库有requests库和python内置的urllib库，一般建议使用requests，它是对urllib的再次封装，它们使用的主要区别：<br>requests可以直接构建常用的get和post请求并发起，urllib一般要先构建get或者post请求，然后再发起请求。</p><p><strong>正则：</strong></p><ul><li><code>requests.get(url).text</code> 获得html内容</li><li><code>re.search</code> 找到匹配的字符串，只匹配一次</li><li>获得需要处理的内容，\s可以匹配空格、Tab空白符）</li><li><code>match.group(n)</code>返回子字符串,注意到group(0)永远是原始字符串，group(1)、group(2)……表示第1、2、……个子串。</li><li><code>.</code>匹配除了换行的任意字符,<code>\s</code>匹配任何Unicode空白字符（包括 [ \t\n\r\f\v] ,?对它前面的正则式匹配0到1次重复</li></ul><p><strong>🔑Solution</strong><br>查看页面源代码,发现后面有一堆乱七八糟的字符,我们的任务就是把里面参杂的字母给挑出来</p><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#  level2</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">html = requests.get(</span><br><span class="line">    <span class="string">"http://www.pythonchallenge.com/pc/def/ocr.html"</span>).text  <span class="comment"># 获取HTML文档</span></span><br><span class="line"></span><br><span class="line">text = re.search(<span class="string">r"&lt;!--\n(%(.|\s)+)?\n--&gt;"</span>, html).group(<span class="number">1</span>)</span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">'output/level_2_data.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line">file.write(text)</span><br><span class="line">final_text = re.findall(<span class="string">"[a-z]"</span>, text)  <span class="comment"># findall 返回字符串列表</span></span><br><span class="line">print(final_text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者直接对所有字符计数</span></span><br><span class="line"><span class="comment"># final_text = re.search("&lt;!--\n%(.|\s)+", text).group()</span></span><br><span class="line"><span class="comment"># q = Counter(final_text)  # 对里面的所有字符计数</span></span><br><span class="line"><span class="comment"># print(q)</span></span><br><span class="line"><span class="comment"># t = [i for i in q if q[i] == 1]  # 找出只出现一次的字符</span></span><br><span class="line"><span class="comment"># print("".join(t))</span></span><br><span class="line"><span class="comment"># 输出了equality</span></span><br><span class="line"></span><br><span class="line"><span class="string">""" 另一种方法，使用了urllib</span></span><br><span class="line"><span class="string">import urllib.request as ur</span></span><br><span class="line"><span class="string">import re</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">url = "http://www.pythonchallenge.com/pc/def/ocr.html"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">def main():</span></span><br><span class="line"><span class="string">    global url</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    response = ur.urlopen(url)</span></span><br><span class="line"><span class="string">    body = response.read()</span></span><br><span class="line"><span class="string">    print(body)</span></span><br><span class="line"><span class="string">    text = re.search("&lt;!--\n%(.|\s)+", body.decode())</span></span><br><span class="line"><span class="string">    dic = {}</span></span><br><span class="line"><span class="string">    # print(text.group(0))</span></span><br><span class="line"><span class="string">    for x in text.group(0):</span></span><br><span class="line"><span class="string">        if x not in dic:</span></span><br><span class="line"><span class="string">            dic[x] = 1</span></span><br><span class="line"><span class="string">        else:</span></span><br><span class="line"><span class="string">            dic[x] += 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    for k,v in dic.items():</span></span><br><span class="line"><span class="string">        print(k,v)</span></span><br><span class="line"><span class="string">    for i in dic:</span></span><br><span class="line"><span class="string">        if (dic[i] == 1 and 'a' &lt;= i &lt;= 'z'):</span></span><br><span class="line"><span class="string">            print(i, end='')</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if __name__ == '__main__':</span></span><br><span class="line"><span class="string">    main()</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="level-3-equality-2020-10-29">level 3_equality_2020.10.29</h2><p>Link : <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/equality.html">http://www.pythonchallenge.com/pc/def/equality.html</a><br><img src="https://i.loli.net/2020/11/14/dXmwRVtqJkvEosO.png" alt="level_3"></p><p><strong>🖊Learned</strong></p><ul><li>findall用括号自动返回子串，当给出的正则表达式中带有多个括号时，列表的元素为多个字符串组成的tuple</li><li><code>re.findall(r'[^A-Z][A-Z]{3}([a-z])[A-Z]{3}[^A-Z]', text)</code>匹配时需要注意既然约定了3个大写字母,那外围就是小写字母了!</li></ul><p><strong>🔑Solution</strong><br>根据图片底下的文字提示,需要找到源代码中被三个大写字母包围的小写字母,然后把它们拼接在一起,为linklist<br>打开 <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/linkedlist.html">http://www.pythonchallenge.com/pc/def/linkedlist.html</a> 提示linkedlist.php<br>再打开 <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/linkedlist.php">http://www.pythonchallenge.com/pc/def/linkedlist.php</a></p><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">html = requests.get(<span class="string">"http://www.pythonchallenge.com/pc/def/equality.html"</span>).text</span><br><span class="line">text = re.search(<span class="string">r'&lt;!--\n((.|\s)+)?\n--&gt;'</span>, html).group(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">'level_3_data.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line">file.write(text)</span><br><span class="line">results = re.findall(<span class="string">r'[^A-Z][A-Z]{3}([a-z])[A-Z]{3}[^A-Z]'</span>, text)</span><br><span class="line">print(<span class="string">''</span>.join(results))  <span class="comment">#linkedlist</span></span><br><span class="line"><span class="comment"># ? 如果不括号起来，得到的结果会是</span></span><br><span class="line"><span class="comment"># !['qIQNlQSLi', 'eOEKiVEYj', 'aZADnMCZq', 'bZUTkLYNg', 'uCNDeHSBj', 'kOIXdKBFh', 'dXJVlGZVm', 'gZAGiLQZx', 'vCJAsACFl', 'qKWGtIDCj']</span></span><br><span class="line"><span class="comment"># 所以说findall用括号自动返回子串，当给出的正则表达式中带有多个括号时，列表的元素为多个字符串组成的tuple</span></span><br></pre></td></tr></tbody></table></figure><h2 id="level-4-linkedlist-2020-10-30">level_4_linkedlist_2020.10.30</h2><p>Link :<a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/linkedlist.php">http://www.pythonchallenge.com/pc/def/linkedlist.php</a><br><img src="https://i.loli.net/2020/11/14/1a8I2zg9c3CShUB.png" alt="level_4头图"><br><strong>🖊Learned</strong><br>要注意函数的局部变量和全局变量呀<br>request 尝试多次连接页面</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> i &lt; <span class="number">3</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = requests.get(url, timeout=<span class="number">5</span>).text</span><br><span class="line">        <span class="keyword">return</span> html</span><br><span class="line">    <span class="keyword">except</span> requests.exceptions.RequestException:</span><br><span class="line">        i += <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><p><strong>🔑Solution</strong><br>点击<a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/linkedlist.php?nothing=12345">linkedlist.php?nothing=12345</a>这个链接,进入的页面显示and the next nothing is 44827,反复操作,发现这一关就是疯狂跳转网页</p><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">next_page</span>(<span class="params">link</span>):</span></span><br><span class="line">    <span class="keyword">global</span> steps <span class="comment"># 使得函数内的step和全局变量为一个变量</span></span><br><span class="line">    html = gethtml(<span class="string">f"http://www.pythonchallenge.com/pc/def/linkedlist.php?nothing=<span class="subst">{link}</span>"</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        hint = re.search(<span class="string">r'.*\s(\d+)'</span>, html).group(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">except</span> AttributeError:</span><br><span class="line">        print(html)</span><br><span class="line">        print(<span class="string">"小心前面有诡计！"</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'stop'</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        steps +=<span class="number">1</span></span><br><span class="line">        print(steps, hint)</span><br><span class="line">        <span class="keyword">return</span> hint</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gethtml</span>(<span class="params">url</span>):</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    因为发现request经常会卡住无响应，所以封装了这个函数，用于重试</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            html = requests.get(url, timeout=<span class="number">5</span>).text</span><br><span class="line">            <span class="keyword">return</span> html</span><br><span class="line">        <span class="keyword">except</span> requests.exceptions.RequestException:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">link</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        link = next_page(link)</span><br><span class="line">        <span class="keyword">if</span> link == <span class="string">'stop'</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">steps = <span class="number">1</span></span><br><span class="line">link = <span class="number">12345</span></span><br><span class="line">run(link)</span><br><span class="line"><span class="comment"># Yes. Divide by two and keep going.</span></span><br><span class="line">print(<span class="string">'怕啥，那我就输入8022继续跑'</span>)</span><br><span class="line">run(<span class="number">8022</span>)  <span class="comment"># 16044//2=8022</span></span><br><span class="line"><span class="comment"># 最终输出结果peak.html，打开http://www.pythonchallenge.com/pc/def/peak.html</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="level-5-peak-2020-10-31">level_5_peak_2020.10.31</h2><p>Link: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/peak.html">http://www.pythonchallenge.com/pc/def/peak.html</a></p><p><img src="https://i.loli.net/2020/10/31/gGHW3n5NeKUZBY9.png" alt="level_5"></p><p><strong>🖊Learned</strong><br>爬虫</p><ul><li><code>requests.get(url).text</code> 是获得纯文本内容</li><li><code>requests.get(url).content</code>是二进制内容</li><li><code>urllib.urlopen(url)</code> 返回的是文件对象，用read()查看</li></ul><p>pickle<br><code>pickle</code>是python语言的一个标准模块，能对数据进行序列化和反序列化，序列化过程将文本信息转变为二进制数据流。反序列化便可以得到原始的数据。这样便于存储数据和发送数据</p><ul><li><code>pickle.dump()</code> 序列化</li><li><code>pickle.load()</code> 反序列化方法</li></ul><p><strong>🔑Solution</strong><br>点击<a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/banner.p">banner.p</a>，发现页面只有这样的长~条</p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">(lp0</span><br><span class="line">(lp1</span><br><span class="line">(S' '</span><br><span class="line">p2</span><br><span class="line">I95</span><br><span class="line">tp3</span><br><span class="line">aa(lp4</span><br><span class="line">(g2</span><br><span class="line">I14</span><br><span class="line">tp5</span><br><span class="line">a(S'#'</span><br><span class="line">p6</span><br><span class="line">I5</span><br><span class="line">tp7</span><br><span class="line">a(g2</span><br><span class="line">I70</span><br><span class="line">tp8</span><br><span class="line">a(g6</span><br><span class="line">I5</span><br><span class="line">tp9</span><br><span class="line">a(g2</span><br><span class="line">I1</span><br><span class="line">tp10</span><br><span class="line">aa(lp11</span><br><span class="line">(g2</span><br><span class="line">I15</span><br><span class="line">tp12</span><br></pre></td></tr></tbody></table></figure><p>之前源代码提示"peak hell sounds familiar ",peak hell 的谐音是pickle，就用pickle处理数据，发现是一个二维数组，每行都以[(’ ‘/’#', 数字)],这种形式存放内容单位, 而列表的每行数字相加都为95，猜测前面是打印的内容，后面跟着是打印的数量，最后竟然在终端输出为一个大大的“channel”!</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取二进制的数据</span></span><br><span class="line">content= requests.get(<span class="string">"http://www.pythonchallenge.com/pc/def/banner.p"</span>).content</span><br><span class="line"><span class="comment"># print(content)</span></span><br><span class="line">data = pickle.loads(content)</span><br><span class="line"><span class="comment"># 发现是一个二维数组，每行都以[(' '/'#', 数字)],这种形式存放内容单位</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> data:</span><br><span class="line">    print(line)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表的每行相加都为95，猜测前面是打印的内容，后面跟着是打印的数量</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> data:</span><br><span class="line">    output = <span class="string">''</span></span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> line:</span><br><span class="line">        output +=c[<span class="number">0</span>]*c[<span class="number">1</span>]</span><br><span class="line">    print(output)</span><br><span class="line"></span><br><span class="line"><span class="comment">##得到channel的输出</span></span><br><span class="line"><span class="comment">## http://www.pythonchallenge.com/pc/def/channel.html</span></span><br></pre></td></tr></tbody></table></figure><p><strong>Output</strong></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">              #####                                                                      #####</span><br><span class="line">               ####                                                                       ####</span><br><span class="line">               ####                                                                       ####</span><br><span class="line">               ####                                                                       ####</span><br><span class="line">               ####                                                                       ####</span><br><span class="line">               ####                                                                       ####</span><br><span class="line">               ####                                                                       ####</span><br><span class="line">               ####                                                                       ####</span><br><span class="line">      ###      ####   ###         ###       #####   ###    #####   ###          ###       ####</span><br><span class="line">   ###   ##    #### #######     ##  ###      #### #######   #### #######     ###  ###     ####</span><br><span class="line">  ###     ###  #####    ####   ###   ####    #####    ####  #####    ####   ###     ###   ####</span><br><span class="line"> ###           ####     ####   ###    ###    ####     ####  ####     ####  ###      ####  ####</span><br><span class="line"> ###           ####     ####          ###    ####     ####  ####     ####  ###       ###  ####</span><br><span class="line">####           ####     ####     ##   ###    ####     ####  ####     #### ####       ###  ####</span><br><span class="line">####           ####     ####   ##########    ####     ####  ####     #### ##############  ####</span><br><span class="line">####           ####     ####  ###    ####    ####     ####  ####     #### ####            ####</span><br><span class="line">####           ####     #### ####     ###    ####     ####  ####     #### ####            ####</span><br><span class="line"> ###           ####     #### ####     ###    ####     ####  ####     ####  ###            ####</span><br><span class="line">  ###      ##  ####     ####  ###    ####    ####     ####  ####     ####   ###      ##   ####</span><br><span class="line">   ###    ##   ####     ####   ###########   ####     ####  ####     ####    ###    ##    ####</span><br><span class="line">      ###     ######    #####    ##    #### ######    ###########    #####      ###      ######</span><br></pre></td></tr></tbody></table></figure><h2 id="level-6-channel-2020-11-1">level_6_channel_2020.11.1</h2><p>Link: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/channel.html">http://www.pythonchallenge.com/pc/def/channel.html</a></p><p><img src="https://i.loli.net/2020/11/14/Iu7NkRG8coOTPZs.jpg" alt=""><br><strong>🖊Learned</strong><br>python中如何打开压缩包<br><code>channel_zip = zipfile.ZipFile(zip_file, "r")</code>创建压缩包对象<br><code>channel_zip.open('readme.txt', 'r')</code> 打开压缩包里的某个文件</p><p><strong>🔑Solution</strong><br>查看源代码</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span> <span class="comment">&lt;!-- &lt;-- zip --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>now there are pairs<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"../style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">top_img</span> <span class="attr">src</span>=<span class="string">"channel.jpg"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- The following has nothing to do with the riddle itself. I just</span></span><br><span class="line"><span class="comment">thought it would be the right point to offer you to donate to the</span></span><br><span class="line"><span class="comment">Python Challenge project. Any amount will be greatly appreciated.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">-thesamet</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>如果把注释去掉就是html &lt;-- zip，暗示把html改为zip</p><p>提示是zip，于是改url，发现可下载zip！（城会玩！）</p><p><img src="https://i.loli.net/2020/11/14/8RCsjhBYHVJLSTt.png" alt=""></p><p>查看压缩包，发现里面有一个readme.txt, 剩下的文件是一大坨以数字命名的txt,阅读readme, 发现这一关和linklist类似,谜底和peak关又类似, 最后答案为hockey</p><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> zipfile  <span class="comment"># #导入对zip文件处理的模块 zipfile</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##获取二进制数据</span></span><br><span class="line">zip_get = requests.get(</span><br><span class="line">    <span class="string">"http://www.pythonchallenge.com/pc/def/channel.zip"</span>).content</span><br><span class="line"></span><br><span class="line"><span class="comment"># StringIO和BytesIO是在内存中操作str和bytes的方法，使得和读写文件具有一致的接口</span></span><br><span class="line">zip_file = io.BytesIO(zip_get)  <span class="comment">#将函数返回的压缩包的二进制数据在内存中读</span></span><br><span class="line">channel_zip = zipfile.ZipFile(zip_file, <span class="string">"r"</span>)  <span class="comment">#以只读方式打开压缩包</span></span><br><span class="line"></span><br><span class="line">print(channel_zip.namelist())  <span class="comment">#打印压缩包内的文件名列表</span></span><br><span class="line"><span class="comment">#阅读 readme.txt</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> channel_zip.<span class="built_in">open</span>(<span class="string">'readme.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    print(f.read().decode(<span class="string">'utf-8'</span>)) <span class="comment">#文件里的内容是byte字节，所以用utf-8读取</span></span><br><span class="line"></span><br><span class="line"> <span class="string">"""得到如下提示</span></span><br><span class="line"><span class="string"> welcome to my zipped list.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># hint1: start from 90052</span></span><br><span class="line"><span class="string"># hint2: answer is inside the zip</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">file_name_next = <span class="string">"90052"</span>  <span class="comment"># 阅读readme.txt的提示</span></span><br><span class="line">comment = <span class="string">''</span>  <span class="comment"># 阅读 46145.txt，说要collect the comments</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    file_comment = channel_zip.getinfo(file_name_next + <span class="string">".txt"</span>).comment.decode(</span><br><span class="line">        <span class="string">"utf-8"</span>)  <span class="comment"># 以utf-8方式读取压缩包内的各个文件</span></span><br><span class="line">    <span class="comment">#comment是个什么东东？？</span></span><br><span class="line">    comment += file_comment</span><br><span class="line">    <span class="keyword">with</span> channel_zip.<span class="built_in">open</span>(file_name_next + <span class="string">".txt"</span>, <span class="string">"r"</span>) <span class="keyword">as</span> f:  <span class="comment"># 阅读文件内容</span></span><br><span class="line">        file_content = f.read().decode(<span class="string">'utf-8'</span>)</span><br><span class="line">        print(file_content)</span><br><span class="line">    <span class="keyword">try</span>:  <span class="comment"># 尝试查找下一个线索，用正则查找数字</span></span><br><span class="line">        file_name_next = re.search(<span class="string">r"\d+"</span>, file_content).group(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">except</span>:  <span class="comment">#没有则中断</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">print(comment)</span><br><span class="line"></span><br><span class="line">zip_file.close()</span><br></pre></td></tr></tbody></table></figure><p><strong>Output</strong></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">****************************************************************</span><br><span class="line">****************************************************************</span><br><span class="line">**                                                            **</span><br><span class="line">**   OO    OO    XX      YYYY    GG    GG  EEEEEE NN      NN  **</span><br><span class="line">**   OO    OO  XXXXXX   YYYYYY   GG   GG   EEEEEE  NN    NN   **</span><br><span class="line">**   OO    OO XXX  XXX YYY   YY  GG GG     EE       NN  NN    **</span><br><span class="line">**   OOOOOOOO XX    XX YY        GGG       EEEEE     NNNN     **</span><br><span class="line">**   OOOOOOOO XX    XX YY        GGG       EEEEE      NN      **</span><br><span class="line">**   OO    OO XXX  XXX YYY   YY  GG GG     EE         NN      **</span><br><span class="line">**   OO    OO  XXXXXX   YYYYYY   GG   GG   EEEEEE     NN      **</span><br><span class="line">**   OO    OO    XX      YYYY    GG    GG  EEEEEE     NN      **</span><br><span class="line">**                                                            **</span><br><span class="line">****************************************************************</span><br><span class="line"> **************************************************************</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>所谓的comment其实可以通过banzip查看,"空白"的注释应该是空格或者换行符</p><p><img src="https://i.loli.net/2020/11/15/Bb4tqPk7efEyZho.png" alt="使用banzip查看压缩包内容"></p><h2 id="level-7-oxygen-2020-11-2">level_7_oxygen_2020.11.2</h2><p>Link: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/hockey.html">http://www.pythonchallenge.com/pc/def/hockey.html</a></p><p><strong>🖊Learned</strong><br>这是第一次遇到PIL,后面PIL就是老盆友咯!<br>top_img.getpixel((x,y)) 获得像素值<br>top_img.size 获得w和h</p><p><strong>🔑Solution</strong><br>it’s in the air. look at the letters. letter指的是hockey，说在空气中，空气那就是氮气、氧气、二氧化碳等东西，猜测是氧气oxygen。</p><p>于是打开http://www.pythonchallenge.com/pc/def/oxygen.html，发现第七关谜题，只有一张图，中间有个灰带html代码如下<br><img src="https://i.loli.net/2020/11/14/xiZeBmbaCh3L4oJ.png" alt=""></p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>smarty<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"../style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">top_img</span> <span class="attr">src</span>=<span class="string">"oxygen.png"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>获取图片，对其进行处理</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image  <span class="comment"># Python Imaging Library导入Image</span></span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://www.pythonchallenge.com/pc/def/oxygen.png'</span></span><br><span class="line">image = requests.get(url).content</span><br><span class="line"></span><br><span class="line">top_img_io = io.BytesIO(image)  <span class="comment">#二进制数据放入内存</span></span><br><span class="line">top_img = Image.<span class="built_in">open</span>(top_img_io)  <span class="comment">#打开图片，创建图片对象</span></span><br><span class="line"><span class="comment"># top_img.show() # 显示图像，启动一个窗口</span></span><br><span class="line"><span class="comment"># print(top_img.size)  #629,95</span></span><br><span class="line"><span class="comment"># 灰色带大概在图片中间部位</span></span><br><span class="line">width, height = top_img.size</span><br><span class="line">y = height // <span class="number">2</span>  <span class="comment">##灰色带的大致区域设为y</span></span><br><span class="line">print(top_img.mode)  <span class="comment"># 查看图片像素模式，RGBA，带alpha通道</span></span><br><span class="line"><span class="comment"># 获取中间条带的信息</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(width):</span><br><span class="line">    pixel = top_img.getpixel((x, y))</span><br><span class="line"></span><br><span class="line">    print(pixel) <span class="comment">#打印各个点的像素信息</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>筛选出灰色带</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(width):</span><br><span class="line">    pixel = top_img.getpixel((x, y))</span><br><span class="line">    <span class="keyword">if</span> pixel[<span class="number">1</span>] == pixel[<span class="number">0</span>] <span class="keyword">and</span> pixel[<span class="number">0</span>] == pixel[<span class="number">2</span>]:</span><br><span class="line"></span><br><span class="line">        print(pixel[<span class="number">0</span>], end=<span class="string">' '</span>)</span><br><span class="line">print()</span><br><span class="line">print()</span><br></pre></td></tr></tbody></table></figure><p>输出结果：开头的115重复5次，中间的重复7次，最后重复8次</p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">115 115 115 115 115 109 109 109 109 109 109 109 97 97 97 97 97 97 97 114 114 114 114 114 114 114 116 116 116 116 116 116 116 32 32 32 32 32 32 32 103 103 103 103 103 103 103 117 117 117 117 117 117 117 121 121 121 121 121 121 121 44 44 44 44 44 44 44 32 32 32 32 32 32 32 121 121 121 121 121 121 121 111 111 111 111 111 111 111 117 117 117 117 117 117 117 ... 52 52 52 52 52 52 52 44 44 44 44 44 44 44 32 32 32 332 32 32 32 49 49 49 49 49 49 49 48 48 48 48 48 48 48 53 53 53 53 53 53 53 44 44 44 4 4 44 44 44 32 32 32 32 32 32 32 49 49 49 49 49 49 49 49 49 49 49 49 49 49 54 54 54 544 54 54 54 44 44 44 44 44 44 44 32 32 32 32 32 32 32 49 49 49 49 49 49 49 50 50 50 50 5</span><br><span class="line">50 50 50 49 49 49 49 49 49 49 93 93 93 93 93 93 93 93</span><br></pre></td></tr></tbody></table></figure><p>把每个灰度值提取出来</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#尝试 给字符串去重, 但是发现会自动排序🤣丢失信息</span></span><br><span class="line"><span class="string">""" grey_list = []</span></span><br><span class="line"><span class="string">for x in range(width):</span></span><br><span class="line"><span class="string">    pixel = top_img.getpixel((x, y))</span></span><br><span class="line"><span class="string">    if pixel[1] == pixel[0] and pixel[0] == pixel[2]:</span></span><br><span class="line"><span class="string">        grey_list.append(pixel[0])</span></span><br><span class="line"><span class="string">grey_set = set(grey_list) #用set去重</span></span><br><span class="line"><span class="string">print(grey_set) """</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 每七个取一个数字</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(width):</span><br><span class="line">    pixel = top_img.getpixel((x, y))</span><br><span class="line">    <span class="keyword">if</span> pixel[<span class="number">1</span>] == pixel[<span class="number">0</span>] <span class="keyword">and</span> pixel[<span class="number">0</span>] == pixel[<span class="number">2</span>]:</span><br><span class="line">        <span class="keyword">if</span> x % <span class="number">7</span> == <span class="number">0</span>:</span><br><span class="line">            print(pixel[<span class="number">0</span>], end=<span class="string">' '</span>)</span><br><span class="line">print()</span><br></pre></td></tr></tbody></table></figure><p>得到数字串</p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">115 109 97 114 116 32 103 117 121 44 32 121 111 117 32 109 97 100 101 32 105 116 46 32 116</span><br><span class="line"></span><br><span class="line">104 101 32 110 101 120 116 32 108 101 118 101 108 32 105 115 32 91 49 48 53 44 32 49 49 48</span><br><span class="line"></span><br><span class="line">44 32 49 49 54 44 32 49 48 49 44 32 49 48 51 44 32 49 49 52 44 32 49 48 53 44 32 49 49 54                         44</span><br><span class="line"></span><br><span class="line">32 49 50 49 93</span><br></pre></td></tr></tbody></table></figure><p>猜测把字符串用ASCII码翻译</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(width):</span><br><span class="line">    pixel = top_img.getpixel((x, y))</span><br><span class="line">    <span class="keyword">if</span> pixel[<span class="number">1</span>] == pixel[<span class="number">0</span>] <span class="keyword">and</span> pixel[<span class="number">0</span>] == pixel[<span class="number">2</span>]:</span><br><span class="line">        <span class="keyword">if</span> x % <span class="number">7</span> == <span class="number">0</span>:</span><br><span class="line">            print(<span class="built_in">chr</span>(pixel[<span class="number">0</span>]), end=<span class="string">''</span>)</span><br><span class="line">print()</span><br><span class="line"><span class="comment"># ! 得到 smart guy, you made it. the next level is [105, 110, 116, 101, 103, 114, 105, 116, 121]</span></span><br></pre></td></tr></tbody></table></figure><p>最后的处理, 得到integrity</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">hint = [<span class="number">105</span>, <span class="number">110</span>, <span class="number">116</span>, <span class="number">101</span>, <span class="number">103</span>, <span class="number">114</span>, <span class="number">105</span>, <span class="number">116</span>, <span class="number">121</span>]</span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> hint:</span><br><span class="line">    print(<span class="built_in">chr</span>(num), end=<span class="string">''</span>)  <span class="comment">#integrity</span></span><br></pre></td></tr></tbody></table></figure><p><strong>💻Code</strong><br>完整代码</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image  <span class="comment"># Python Imaging Library导入Image</span></span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://www.pythonchallenge.com/pc/def/oxygen.png'</span></span><br><span class="line">image = requests.get(url).content</span><br><span class="line"></span><br><span class="line">top_img_io = io.BytesIO(image)  <span class="comment"># 二进制数据放入内存</span></span><br><span class="line">top_img = Image.<span class="built_in">open</span>(top_img_io)  <span class="comment"># 打开图片，创建图片对象</span></span><br><span class="line"><span class="comment"># top_img.show() # 显示图像，启动一个窗口</span></span><br><span class="line"><span class="comment"># print(top_img.size)  #629,95</span></span><br><span class="line"><span class="comment"># 灰色带大概在图片中间部位</span></span><br><span class="line">width, height = top_img.size</span><br><span class="line">y = height // <span class="number">2</span>  <span class="comment"># 灰色带的大致区域设为y</span></span><br><span class="line">print(top_img.mode)  <span class="comment"># 查看图片像素模式，RGBA，带alpha通道</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(width):</span><br><span class="line">    pixel = top_img.getpixel((x, y))</span><br><span class="line"></span><br><span class="line">    print(pixel)  <span class="comment"># 打印各个点的像素信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 得到各个点的RGBA值后，先对灰色像素带处理</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 每七个取一个数字</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ?猜测把字符串用ASCII码翻译</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(width):</span><br><span class="line">    pixel = top_img.getpixel((x, y))</span><br><span class="line">    <span class="keyword">if</span> pixel[<span class="number">1</span>] == pixel[<span class="number">0</span>] <span class="keyword">and</span> pixel[<span class="number">0</span>] == pixel[<span class="number">2</span>]:</span><br><span class="line">        <span class="keyword">if</span> x % <span class="number">7</span> == <span class="number">0</span>:</span><br><span class="line">            print(<span class="built_in">chr</span>(pixel[<span class="number">0</span>]), end=<span class="string">''</span>)</span><br><span class="line">print()</span><br><span class="line"><span class="comment"># ! 得到 smart guy, you made it. the next level is [105, 110, 116, 101, 103, 114, 105, 116, 121]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">hint = [<span class="number">105</span>, <span class="number">110</span>, <span class="number">116</span>, <span class="number">101</span>, <span class="number">103</span>, <span class="number">114</span>, <span class="number">105</span>, <span class="number">116</span>, <span class="number">121</span>]</span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> hint:</span><br><span class="line">    print(<span class="built_in">chr</span>(num), end=<span class="string">''</span>)  <span class="comment"># integrity</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="level-8-integrity-2020-11-3">level 8_integrity_2020.11.3</h2><p>Link : <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/integrity.html">http://www.pythonchallenge.com/pc/def/integrity.html</a></p><p><strong>🖊Learned</strong></p><blockquote><p>bz2 模块是 bzip2 库的接口，用于压缩数据以进行存储或传输。提供了三种 API：</p><p>​ “一次性” 压缩 / 解压缩功能，用于操作大堆数据,<a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3/library/bz2.html#bz2.compress"><code>compress()</code></a> 和 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3/library/bz2.html#bz2.decompress"><code>decompress()</code></a> 函数。<br>​ 用于处理数据流的迭代压缩 / 解压缩对象,<a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3/library/bz2.html#bz2.BZ2Compressor"><code>BZ2Compressor</code></a> 和 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3/library/bz2.html#bz2.BZ2Decompressor"><code>BZ2Decompressor</code></a> 类。<br>​ 类似文件的类，支持与未压缩文件一样的读写,<a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3/library/bz2.html#bz2.open"><code>open()</code></a> 函数和 <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3/library/bz2.html#bz2.BZ2File"><code>BZ2File</code></a> 类。<br>————————————————</p></blockquote><p>然后总结一下bz2的用法，首先输入的解压数据得是二进制，<code>bz2.BZ2Decompressor()</code>是创建一个Decompressor，还是得用decompress来解压数据，不过这是逐步处理而不是一次性将数据全放入内存！</p><p>记住b’BZ…'二进制数据BZ开头就是用bz2压缩的,之后也会经常遇到</p><p><strong>🔑Solution</strong></p><p>查看源代码</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>working hard?<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"../style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">top_img</span> <span class="attr">src</span>=<span class="string">"integrity.jpg"</span> <span class="attr">width</span>=<span class="string">"640"</span> <span class="attr">height</span>=<span class="string">"480"</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">usemap</span>=<span class="string">"#notinsect"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">map</span> <span class="attr">name</span>=<span class="string">"notinsect"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">"poly"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">coords</span>=<span class="string">"179,284,214,311,255,320,281,226,319,224,363,309,339,222,371,225,411,229,404,242,415,252,428,233,428,214,394,207,383,205,390,195,423,192,439,193,442,209,440,215,450,221,457,226,469,202,475,187,494,188,494,169,498,147,491,121,477,136,481,96,471,94,458,98,444,91,420,87,405,92,391,88,376,82,350,79,330,82,314,85,305,90,299,96,290,103,276,110,262,114,225,123,212,125,185,133,138,144,118,160,97,168,87,176,110,180,145,176,153,176,150,182,137,190,126,194,121,198,126,203,151,205,160,195,168,217,169,234,170,260,174,282"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">href</span>=<span class="string">"../return/good.html"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"#303030"</span> <span class="attr">size</span>=<span class="string">"+2"</span>&gt;</span>Where is the missing link?<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">un: 'BZh91AY&amp;SYA\xaf\x82\r\x00\x00\x01\x01\x80\x02\xc0\x02\x00 \x00!\x9ah3M\x07&lt;]\xc9\x14\xe1BA\x06\xbe\x084'</span></span><br><span class="line"><span class="comment">pw: 'BZh91AY&amp;SY\x94$|\x0e\x00\x00\x00\x81\x00\x03$ \x00!\x9ah3M\x13&lt;]\xc9\x14\xe1BBP\x91\xf08'</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>Where is the missing link? 链接缺失，area有属性的coords好像有问题，输入进去</p><p>难道有鬼？？？</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">may_hint = <span class="string">"179,284,214,311,255,320,281,226,319,224,363,309,339,222,371,225,411,229,404,242,415,252,428,233,428,214,394,207,383,205,390,195,423,192,439,193,442,209,440,215,450,221,457,226,469,202,475,187,494,188,494,169,498,147,491,121,477,136,481,96,471,94,458,98,444,91,420,87,405,92,391,88,376,82,350,79,330,82,314,85,305,90,299,96,290,103,276,110,262,114,225,123,212,125,185,133,138,144,118,160,97,168,87,176,110,180,145,176,153,176,150,182,137,190,126,194,121,198,126,203,151,205,160,195,168,217,169,234,170,260,174,282"</span></span><br><span class="line"></span><br><span class="line">mh_list = may_hint.split(<span class="string">','</span>)</span><br><span class="line">print(mh_list)</span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> mh_list:</span><br><span class="line">    print(<span class="built_in">chr</span>(<span class="built_in">int</span>(num)), end=<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">output result：it seems terrible!!!</span></span><br><span class="line"><span class="string">³ĜÖķÿŀęâĿàūĵœÞųáƛåƔòƟüƬéƬÖƊÏſÍƆÃƧÀƷÁƺÑƸ×ǂÝǉâǕÊǛ»Ǯ¼Ǯ©ǲǫyǝǡ`Ǘ^ǊbƼ[ƤWƕ\ƇXŸRŞOŊRĺUıZī`ĢgĔnĆrá{Ô}¹</span></span><br><span class="line"><span class="string">°°¶¾~ÂyÆ~ËÍ Ã¨Ù©êªĄ®Ě³</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></tbody></table></figure><p>好吧是我想多了，还有其他信息</p><p>点击超链接，看到让人输出用户名和密码</p><p><img src="https://i.loli.net/2020/11/14/mX5UOF8JTP6h3wW.png" alt=""></p><p>看到最后一段的注释好像就是对应的用户名un和密码pw，问题是这玩意怎么解！！！</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">un: 'BZh91AY&amp;SYA\xaf\x82\r\x00\x00\x01\x01\x80\x02\xc0\x02\x00 \x00!\x9ah3M\x07&lt;]\xc9\x14\xe1BA\x06\xbe\x084'</span></span><br><span class="line"><span class="comment">pw: 'BZh91AY&amp;SY\x94$|\x0e\x00\x00\x00\x81\x00\x03$ \x00!\x9ah3M\x13&lt;]\xc9\x14\xe1BBP\x91\xf08'</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>注意到开头BZ，查阅之后得知是bzip2压缩, 把un和pw字符串进行解压就可以得到答案了</p><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> bz2</span><br><span class="line">un = <span class="string">b'BZh91AY&amp;SYA\xaf\x82\r\x00\x00\x01\x01\x80\x02\xc0\x02\x00 \x00!\x9ah3M\x07&lt;]\xc9\x14\xe1BA\x06\xbe\x084'</span></span><br><span class="line">pw = <span class="string">b'BZh91AY&amp;SY\x94$|\x0e\x00\x00\x00\x81\x00\x03$ \x00!\x9ah3M\x13&lt;]\xc9\x14\xe1BBP\x91\xf08'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 逐步处理</span></span><br><span class="line">print(bz2.BZ2Decompressor().decompress(un))</span><br><span class="line">print(bz2.BZ2Decompressor().decompress(pw))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 一次性处理</span></span><br><span class="line"><span class="built_in">print</span> (bz2.decompress(un))</span><br><span class="line"><span class="built_in">print</span> (bz2.decompress(pw))</span><br><span class="line"></span><br><span class="line"><span class="comment"># output:</span></span><br><span class="line"><span class="comment"># b'huge'</span></span><br><span class="line"><span class="comment"># b'file'</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>然后就输入用户名huge，密码file进入第九关啦！</p><p><a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/good.html">点击进入下一关</a></p><h2 id="level-9-good-2020-11-4">level_9_good_2020.11.4</h2><p>Link :<a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/good.html">http://www.pythonchallenge.com/pc/return/good.html</a></p><p><strong>🖊Learned</strong></p><p>今天要学习的内容：</p><ul><li><a target="_blank" rel="noopener" href="https://www.runoob.com/python/python-func-zip.html">Python zip() 函数</a>，经常用于列表两个两个处理</li><li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/59849190">Python Pillow 库 ImageDraw 绘制图像模块</a></li><li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/171ce1d0656e">python Image</a></li></ul><p>PIL.Image.new(mode, size, color=0)</p><ul><li>mode 颜色模式，9种，分别为1(非黑即白)，L(灰色），P（8bit,调色板模式)，RGB，RGBA，CMYK，YCbCr，I，F。</li><li>size 大小（500，500）</li><li>color 默认黑色</li></ul><p>Web客户端授权验证</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 用户名</span></span><br><span class="line">user = <span class="string">"huge"</span></span><br><span class="line"><span class="comment"># 密码</span></span><br><span class="line">passwd = <span class="string">"file"</span></span><br><span class="line"><span class="comment"># Web服务器 IP</span></span><br><span class="line">url = <span class="string">"http://www.pythonchallenge.com/pc/return/good.html"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 构建一个密码管理对象，用来保存需要处理的用户名和密码</span></span><br><span class="line">passwdmgr = urllib.request.HTTPPasswordMgrWithDefaultRealm()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 添加账户信息，第一个参数realm是与远程服务器相关的域信息，一般没人管它都是写None，后面三个参数分别是 Web服务器、用户名、密码</span></span><br><span class="line">passwdmgr.add_password(<span class="literal">None</span>, url, user, passwd)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 构建一个HTTP基础用户名/密码验证的HTTPBasicAuthHandler处理器对象，参数是创建的密码管理对象</span></span><br><span class="line">httpauth_handler = urllib.request.HTTPBasicAuthHandler(passwdmgr)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 通过 build_opener()方法使用这些代理Handler对象，创建自定义opener对象，参数包括构建的 proxy_handler</span></span><br><span class="line">opener = urllib.request.build_opener(httpauth_handler)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 可以选择通过install_opener()方法定义opener为全局opener</span></span><br><span class="line">urllib.request.install_opener(opener)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 构建 Request对象</span></span><br><span class="line">request = urllib.request.Request(url)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. 定义opener为全局opener后，可直接使用urlopen()发送请求</span></span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8. 打印响应内容</span></span><br><span class="line">html = response.read().decode()</span><br></pre></td></tr></tbody></table></figure><p>好像有点长~哇</p><p><strong>🔑Solution</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageDraw</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#改天用正则表达式改下</span></span><br><span class="line">first = [</span><br><span class="line">    <span class="number">146</span>, <span class="number">399</span>, <span class="number">163</span>, <span class="number">403</span>, <span class="number">170</span>, <span class="number">393</span>, <span class="number">169</span>, <span class="number">391</span>, <span class="number">166</span>, <span class="number">386</span>, <span class="number">170</span>, <span class="number">381</span>, <span class="number">170</span>, <span class="number">371</span>, <span class="number">170</span>,</span><br><span class="line">...</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">second = [</span><br><span class="line">    <span class="number">156</span>, <span class="number">141</span>, <span class="number">165</span>, <span class="number">135</span>, <span class="number">169</span>, <span class="number">131</span>, <span class="number">176</span>, <span class="number">130</span>, <span class="number">187</span>, <span class="number">134</span>, <span class="number">191</span>, <span class="number">140</span>, <span class="number">191</span>, <span class="number">146</span>, <span class="number">186</span>,</span><br><span class="line">...</span><br><span class="line">]</span><br><span class="line"><span class="comment">#创建图片对象，背景为白色，模式为非黑即白</span></span><br><span class="line">top_img = Image.new(<span class="string">'1'</span>, (<span class="number">500</span>, <span class="number">500</span>), <span class="number">1</span>)</span><br><span class="line">draw = ImageDraw.Draw(top_img)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>打印first</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">draw.line(<span class="built_in">list</span>(<span class="built_in">zip</span>(first[<span class="number">0</span>::<span class="number">2</span>], first[<span class="number">1</span>::<span class="number">2</span>])))</span><br><span class="line"></span><br><span class="line">top_img.show()</span><br></pre></td></tr></tbody></table></figure><p>&lt;top_img src=“<a target="_blank" rel="noopener" href="https://i.loli.net/2020/11/14/niUgVLqSEk8sT3x.png">https://i.loli.net/2020/11/14/niUgVLqSEk8sT3x.png</a>” width=“50%” /&gt;</p><p>打印second</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">draw.line(<span class="built_in">list</span>(<span class="built_in">zip</span>(second[<span class="number">0</span>::<span class="number">2</span>], second[<span class="number">1</span>::<span class="number">2</span>])))</span><br><span class="line">top_img.show()</span><br></pre></td></tr></tbody></table></figure><p>&lt;top_img src=“<a target="_blank" rel="noopener" href="https://i.loli.net/2020/11/14/XCBEkIuJLOo3pjH.png">https://i.loli.net/2020/11/14/XCBEkIuJLOo3pjH.png</a>” width=“50%;” /&gt;</p><p>合并</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># draw.line(list(zip(first[0::2], first[1::2])))</span></span><br><span class="line"><span class="comment"># draw.line(list(zip(second[0::2], second[1::2])))</span></span><br><span class="line">draw.line(first)</span><br><span class="line">draw.line(second)</span><br><span class="line">top_img.show()</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>&lt;top_img src=“<a target="_blank" rel="noopener" href="https://i.loli.net/2020/11/14/nlBoNPd1jp3GEvc.png">https://i.loli.net/2020/11/14/nlBoNPd1jp3GEvc.png</a>” width=“50%” /&gt;</p><p>换一种画图</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">top_img = Image.new(<span class="string">'RGB'</span>, (<span class="number">500</span>, <span class="number">500</span>))</span><br><span class="line">draw = ImageDraw.Draw(top_img)</span><br><span class="line">draw.polygon(<span class="built_in">list</span>(<span class="built_in">zip</span>(first[<span class="number">0</span>::<span class="number">2</span>], first[<span class="number">1</span>::<span class="number">2</span>])), fill=<span class="string">"white"</span>)</span><br><span class="line">draw.polygon(<span class="built_in">list</span>(<span class="built_in">zip</span>(second[<span class="number">0</span>::<span class="number">2</span>], second[<span class="number">1</span>::<span class="number">2</span>])), fill=<span class="string">"white"</span>)</span><br><span class="line">top_img.show()</span><br></pre></td></tr></tbody></table></figure><p>&lt;top_img src=“<a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201226131057-2020-12-26.png">https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201226131057-2020-12-26.png</a>” width=“50%” /&gt;</p><p>所以答案就是bull啦</p><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageDraw</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># 用户名</span></span><br><span class="line">user = <span class="string">"huge"</span></span><br><span class="line"><span class="comment"># 密码</span></span><br><span class="line">passwd = <span class="string">"file"</span></span><br><span class="line"><span class="comment"># Web服务器 IP</span></span><br><span class="line">url = <span class="string">"http://www.pythonchallenge.com/pc/return/good.html"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 构建一个密码管理对象，用来保存需要处理的用户名和密码</span></span><br><span class="line">passwdmgr = urllib.request.HTTPPasswordMgrWithDefaultRealm()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 添加账户信息，第一个参数realm是与远程服务器相关的域信息，一般没人管它都是写None，后面三个参数分别是 Web服务器、用户名、密码</span></span><br><span class="line">passwdmgr.add_password(<span class="literal">None</span>, url, user, passwd)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 构建一个HTTP基础用户名/密码验证的HTTPBasicAuthHandler处理器对象，参数是创建的密码管理对象</span></span><br><span class="line">httpauth_handler = urllib.request.HTTPBasicAuthHandler(passwdmgr)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 通过 build_opener()方法使用这些代理Handler对象，创建自定义opener对象，参数包括构建的 proxy_handler</span></span><br><span class="line">opener = urllib.request.build_opener(httpauth_handler)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 可以选择通过install_opener()方法定义opener为全局opener</span></span><br><span class="line">urllib.request.install_opener(opener)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 构建 Request对象</span></span><br><span class="line">request = urllib.request.Request(url)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. 定义opener为全局opener后，可直接使用urlopen()发送请求</span></span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8. 打印响应内容</span></span><br><span class="line">html = response.read().decode()</span><br><span class="line">first_str = re.search(<span class="string">r"first:\n((.|\s)+)\n\nsecond:"</span>, html).group(<span class="number">1</span>)</span><br><span class="line">first_num = re.findall(<span class="string">r'\d+'</span>, first_str)</span><br><span class="line">first_num = [<span class="built_in">int</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> first_num]</span><br><span class="line">print(first_num)</span><br><span class="line">second_str = re.search(<span class="string">r'second:\n((.|\s)+)'</span>, html).group(<span class="number">1</span>)</span><br><span class="line">second_num = re.findall(<span class="string">r'\d+'</span>, second_str)</span><br><span class="line">second_num = [<span class="built_in">int</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> second_num]</span><br><span class="line">print(second_num)</span><br><span class="line"></span><br><span class="line">top_img = Image.new(<span class="string">'1'</span>, (<span class="number">500</span>, <span class="number">500</span>), <span class="number">1</span>)</span><br><span class="line">draw = ImageDraw.Draw(top_img)</span><br><span class="line">draw.line(first_num)</span><br><span class="line">draw.line(second_num)</span><br><span class="line">top_img.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># top_img = Image.new('RGB', (500, 500))</span></span><br><span class="line"><span class="comment"># draw = ImageDraw.Draw(top_img)</span></span><br><span class="line"><span class="comment"># draw.polygon(list(zip(first_num[0::2], first_num[1::2])), fill="white")</span></span><br><span class="line"><span class="comment"># draw.polygon(list(zip(second_num[0::2], second_num[1::2])), fill="brown")</span></span><br><span class="line"><span class="comment"># top_img.show()</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/bull.html">点击进入下一关</a></p><h2 id="level-10-bull-2020-11-5">level_10_bull_2020.11.5</h2><p>Link: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/bull.html">http://www.pythonchallenge.com/pc/return/bull.html</a><br><img src="https://i.loli.net/2020/11/14/g5mdp2QahHuecCU.png" alt=""></p><p><strong>🖊Learned</strong><br>这一关考察数学归纳还有编程功底, 计算每个字符出现的重复次数的方法需要学习一下, 虽然可以直接通过python的库实现<br><strong>🔑Solution</strong><br>点击图片，看到</p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">a = [1, 11, 21, 1211, 111221,...]</span><br></pre></td></tr></tbody></table></figure><p>所以这题的意思就是找规律</p><p>1，1个1→11</p><p>2个1→21</p><p>1个2一个1→1211</p><p>1个1，1个2，2个1→111221</p><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># len(a[30]) = ?</span></span><br><span class="line">a = [<span class="string">'1'</span>]</span><br><span class="line">b = <span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">30</span>):  <span class="comment"># 运行30次</span></span><br><span class="line">    position = <span class="number">0</span></span><br><span class="line">    repeats = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> position &lt; <span class="built_in">len</span>(a[num]):</span><br><span class="line">        <span class="keyword">while</span> repeats &lt; <span class="built_in">len</span>(a[num]) <span class="keyword">and</span> a[num][repeats] == a[num][position]:</span><br><span class="line">            repeats += <span class="number">1</span></span><br><span class="line">        b += <span class="built_in">str</span>(repeats - position) + a[num][position]</span><br><span class="line">        position = repeats</span><br><span class="line">    a.append(b)</span><br><span class="line">    b = <span class="string">''</span></span><br><span class="line">print(<span class="built_in">len</span>(a[<span class="number">30</span>]))</span><br></pre></td></tr></tbody></table></figure><p>得到5080</p><p>所以点击进入下一关： <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/5808.html">http://www.pythonchallenge.com/pc/return/5808.html</a></p><h2 id="level-11-5808-pillow-2020-11-6">level_11_5808&amp;pillow_2020.11.6</h2><p>翻译了一整天的药学作业的两篇论文，copy了两万多字，差点吐血🤮</p><p>好了，今晚还是继续挑战python吧</p><h3 id="🖊Learned的知识-pillow">🖊Learned的知识-pillow</h3><p>感觉好几关都和图像处理有关欸！就稍微补一点pillow库的知识吧</p><p><a target="_blank" rel="noopener" href="https://liam.page/2015/04/22/pil-tutorial-basic-usage/">PIL 简明教程 - 基本用法</a></p><p><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014320027235877860c87af5544f25a8deeb55141d60c5000#0">廖雪峰 - Pillow</a></p><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/e8d058767dfa#%E5%9B%BE%E5%83%8F%E9%80%9A%E9%81%93%E5%87%A0%E4%BD%95%E5%8F%98%E6%8D%A2%E8%A3%81%E5%89%AA">python PIL 图像处理</a></p><p>PIL：Python Imaging Library，已经是Python平台事实上的图像处理标准库了。PIL功能非常强大，但API却非常简单易用。但由于PIL仅支持到Python 2.7，加上年久失修，于是一群志愿者在PIL的基础上创建了兼容的版本，名字叫<a target="_blank" rel="noopener" href="https://github.com/python-pillow/Pillow">Pillow</a>，支持最新Python 3.x，又加入了许多新特性，因此，我们可以直接安装使用Pillow。</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">pip install pillow</span><br></pre></td></tr></tbody></table></figure><h4 id="图像打开，保存">图像打开，保存</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开一个jpg图像文件，注意是当前路径:</span></span><br><span class="line">im = Image.<span class="built_in">open</span>(<span class="string">'test.jpg'</span>)</span><br><span class="line"><span class="comment"># 获得图像尺寸:</span></span><br><span class="line">w, h = im.size <span class="comment"># 注意，比如尺寸是640，480，实际为0-639，0-479</span></span><br><span class="line">print(<span class="string">'Original image size: %sx%s'</span> % (w, h))</span><br><span class="line">print(<span class="string">'Resize image to: %sx%s'</span> % (w//<span class="number">2</span>, h//<span class="number">2</span>))</span><br><span class="line"><span class="comment"># 把缩放后的图像用jpeg格式保存:</span></span><br><span class="line">im.save(<span class="string">'thumbnail.jpg'</span>, <span class="string">'jpeg'</span>)</span><br></pre></td></tr></tbody></table></figure><h4 id="图片切片">图片切片</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#box变量是一个四元组(左，上，右，下)。</span></span><br><span class="line">box = (<span class="built_in">int</span>(left), <span class="built_in">int</span>(top),<span class="built_in">int</span>(right),<span class="built_in">int</span>(bottom))</span><br><span class="line"></span><br><span class="line">region = im.crop(box)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h4 id="图片缩放">图片缩放</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 缩放到50%:</span></span><br><span class="line">im.thumbnail((w//<span class="number">2</span>, h//<span class="number">2</span>)) <span class="comment">#  thumbnail会保持宽高比</span></span><br><span class="line"><span class="comment"># 如果要重设大小和比例可以用resize，Image.ANTIALIAS是高质量滤镜</span></span><br><span class="line">top_img = top_img.resize((<span class="number">480</span>, <span class="number">270</span>), Image.ANTIALIAS)</span><br></pre></td></tr></tbody></table></figure><h4 id="使用matplotlib-pyplot">使用matplotlib.pyplot</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">top_img = Image.<span class="built_in">open</span>(<span class="string">'assets/cave.jpg'</span>)  <span class="comment">#打开图像</span></span><br><span class="line">plt.figure(<span class="string">"beauty"</span>)</span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>), plt.title(<span class="string">'origin'</span>)</span><br><span class="line">plt.imshow(top_img), plt.axis(<span class="string">'off'</span>)</span><br><span class="line"><span class="comment">#box变量是一个四元组(左，上，右，下)。</span></span><br><span class="line">box = (<span class="number">80</span>, <span class="number">100</span>, <span class="number">260</span>, <span class="number">300</span>)</span><br><span class="line">roi = top_img.crop(box)</span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">plt.title(<span class="string">'roi'</span>)</span><br><span class="line">plt.imshow(roi)</span><br><span class="line">plt.axis(<span class="string">'off'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure><p><img src="https://i.loli.net/2020/11/14/7ISiFbVpC29mDTO.png" alt=""></p><h4 id="新建图像">新建图像</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">odd_top_img = Image.new(<span class="string">"RGB"</span>, (width // <span class="number">2</span>, height // <span class="number">2</span>), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br></pre></td></tr></tbody></table></figure><h4 id="高斯模糊">高斯模糊</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">im2 = im.<span class="built_in">filter</span>(ImageFilter.BLUR)</span><br><span class="line">im2.save(<span class="string">'blur.jpg'</span>, <span class="string">'jpeg'</span>)</span><br></pre></td></tr></tbody></table></figure><h4 id="生成字母验证码图片">生成字母验证码图片</h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageDraw, ImageFont, ImageFilter</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机字母:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rndChar</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">chr</span>(random.randint(<span class="number">65</span>, <span class="number">90</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机颜色1:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rndColor</span>():</span></span><br><span class="line">    <span class="keyword">return</span> (random.randint(<span class="number">64</span>, <span class="number">255</span>), random.randint(<span class="number">64</span>, <span class="number">255</span>), random.randint(<span class="number">64</span>, <span class="number">255</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机颜色2:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rndColor2</span>():</span></span><br><span class="line">    <span class="keyword">return</span> (random.randint(<span class="number">32</span>, <span class="number">127</span>), random.randint(<span class="number">32</span>, <span class="number">127</span>), random.randint(<span class="number">32</span>, <span class="number">127</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 240 x 60:</span></span><br><span class="line">width = <span class="number">60</span> * <span class="number">4</span></span><br><span class="line">height = <span class="number">60</span></span><br><span class="line">image = Image.new(<span class="string">'RGB'</span>, (width, height), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br><span class="line"><span class="comment"># 创建Font对象:</span></span><br><span class="line">setfont = ImageFont.truetype((<span class="string">'C:/windows/fonts/Arial.ttf'</span>, <span class="number">36</span>)</span><br><span class="line"><span class="comment"># 创建Draw对象:</span></span><br><span class="line">draw = ImageDraw.Draw(image)</span><br><span class="line"><span class="comment"># 填充每个像素:</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(width):</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(height):</span><br><span class="line">        draw.point((x, y), fill=rndColor())</span><br><span class="line"><span class="comment"># 输出文字:</span></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    draw.text((<span class="number">60</span> * t + <span class="number">10</span>, <span class="number">10</span>), rndChar(), font=setfont, fill=rndColor2())</span><br><span class="line"><span class="comment"># 模糊:</span></span><br><span class="line">image = image.<span class="built_in">filter</span>(ImageFilter.BLUR)</span><br><span class="line">image.show()</span><br><span class="line">image.save(<span class="string">'code.jpg'</span>, <span class="string">'jpeg'</span>)</span><br></pre></td></tr></tbody></table></figure><p><img src="https://i.loli.net/2020/11/14/2yhrMLeH8QngKUC.jpg" alt=""></p><p><strong>🔑Solution</strong></p><p>查看网页源代码，odd even 提示很明显了，就是处理图片偶数和奇数像素点</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>odd even<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"../style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">center</span>&gt;</span><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">top_img</span> <span class="attr">src</span>=<span class="string">"cave.jpg"</span> <span class="attr">width</span>=<span class="string">"640"</span> <span class="attr">height</span>=<span class="string">"480"</span> <span class="attr">border</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"gold"</span> <span class="attr">size</span>=<span class="string">"+1"</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>把图保存到本地，如果把这张图放大，就会发现像素块是间隔排列的</p><p><img src="https://i.loli.net/2020/11/14/5qYKj2CQuB4MswU.png" alt=""></p><p><strong>💻Code</strong><br>于是就快乐的码代码啦！</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 本来想直接用requests但是这个网站http://www.pythonchallenge.com/pc/return/cave.jpg需要输入账号和密码才能访问</span></span><br><span class="line"><span class="comment"># import requests</span></span><br><span class="line"><span class="comment"># import io</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="comment"># 就暂时不知道如何处理，就把图片先直接保存到本地了</span></span><br><span class="line">top_img = Image.<span class="built_in">open</span>(<span class="string">r"assets/cave.jpg"</span>)</span><br><span class="line"><span class="comment"># 打印图片格式，大小，颜色模式</span></span><br><span class="line">print(top_img.<span class="built_in">format</span>, top_img.size, top_img.mode)</span><br><span class="line">width, height = top_img.size</span><br><span class="line"><span class="comment"># ? 为什么宽度和高度要除以2呢？</span></span><br><span class="line">odd_top_img = Image.new(<span class="string">"RGB"</span>, (width // <span class="number">2</span>, height // <span class="number">2</span>), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br><span class="line">even_top_img = Image.new(<span class="string">"RGB"</span>, (width // <span class="number">2</span>, height // <span class="number">2</span>), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br><span class="line">origin_top_img_1 = Image.new(<span class="string">"RGB"</span>, (width // <span class="number">2</span>, height // <span class="number">2</span>))</span><br><span class="line">origin_top_img_2 = Image.new(<span class="string">"RGB"</span>, (width // <span class="number">2</span>, height // <span class="number">2</span>))</span><br><span class="line"><span class="comment"># print(top_img.getpixel((640, 480)))</span></span><br><span class="line"><span class="comment"># 对xy都为奇数，xy都为偶数和其他都打印</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(width):</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(height):</span><br><span class="line">        color = top_img.getpixel((x, y))</span><br><span class="line">        <span class="keyword">if</span> (x % <span class="number">2</span> == <span class="number">0</span>) <span class="keyword">and</span> (y % <span class="number">2</span> == <span class="number">0</span>):</span><br><span class="line">            <span class="comment"># 然后再放入新像素里</span></span><br><span class="line">            even_top_img.putpixel((x // <span class="number">2</span>, y // <span class="number">2</span>), value=color)</span><br><span class="line">        <span class="keyword">elif</span> (x % <span class="number">2</span> == <span class="number">1</span>) <span class="keyword">and</span> (y % <span class="number">2</span> == <span class="number">1</span>):</span><br><span class="line">            odd_top_img.putpixel((x // <span class="number">2</span>, y // <span class="number">2</span>), value=color)</span><br><span class="line">        <span class="keyword">elif</span> (x % <span class="number">2</span> == <span class="number">0</span>) <span class="keyword">and</span> (y % <span class="number">2</span> == <span class="number">1</span>):</span><br><span class="line">            origin_top_img_1.putpixel((x // <span class="number">2</span>, y // <span class="number">2</span>), value=color)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            origin_top_img_2.putpixel((x// <span class="number">2</span>, y // <span class="number">2</span>), value=color)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图片</span></span><br><span class="line">odd_top_img.show()</span><br><span class="line">even_top_img.show()</span><br><span class="line">origin_top_img_1.show()</span><br><span class="line">origin_top_img_2.show()</span><br><span class="line"><span class="comment"># 保存图片</span></span><br><span class="line">odd_top_img.save(<span class="string">'output\level_11_odd.png'</span>, <span class="string">'png'</span>)</span><br><span class="line">even_top_img.save(<span class="string">'output\level_11_even.png'</span>, <span class="string">'png'</span>)</span><br><span class="line">origin_top_img_1.save(<span class="string">'output\level_11_origin_1.png'</span>, <span class="string">'png'</span>)</span><br><span class="line">origin_top_img_2.save(<span class="string">'output\level_11_origin_2.png'</span>, <span class="string">'png'</span>)</span><br></pre></td></tr></tbody></table></figure><p>得到的结果会发现odd和even是同一张图，而origin_1和origin_2也是同一张图，相当于是给的图片里放了4张图，两种图</p><p><img src="https://i.loli.net/2020/11/15/hOt3bEveocDF9Sj.png" alt="藏文字的图"></p><p><img src="https://i.loli.net/2020/11/14/2CImv51jyeGuRfM.png" alt="原图"></p><p>原理大概就是这样，用OneNote画的</p><p><img src="https://i.loli.net/2020/11/14/KqNaCX1TykZWD7I.png" alt=""></p><p>所以根据这个原理，其实尝试自己也可以搞一张图，但是效果并不好</p><p>注意藏文字的图文字一定要暗（如果背景黑的话），主要自己是直接用python画的，没有渐变，所以有点生硬，只好把颜色调的很暗才不那么明显。</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageDraw</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageFont</span><br><span class="line"></span><br><span class="line">top_img = Image.<span class="built_in">open</span>(<span class="string">r"assets/wallhaven-vg8mo8.jpg"</span>)</span><br><span class="line"><span class="comment"># print(w, h)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###** 自己也在图片上写一个文字**###</span></span><br><span class="line">draw_top_img = Image.new(<span class="string">'RGB'</span>, (<span class="number">480</span>, <span class="number">270</span>))</span><br><span class="line">draw = ImageDraw.Draw(draw_top_img)</span><br><span class="line"><span class="comment">#选择文字字体和大小</span></span><br><span class="line">setFont = ImageFont.truetype(<span class="string">'C:/windows/fonts/msyh.ttc'</span>, <span class="number">100</span>)</span><br><span class="line"><span class="comment">#设置文字颜色</span></span><br><span class="line">fillColor = <span class="string">"#030800"</span></span><br><span class="line"><span class="comment">#写入文字</span></span><br><span class="line">draw.text((<span class="number">18</span>, <span class="number">15</span>), <span class="string">u'傻逼'</span>, font=setFont, fill=fillColor)</span><br><span class="line">draw_top_img.show()</span><br><span class="line">w, h = top_img.size</span><br><span class="line">output_top_img = Image.new(<span class="string">"RGB"</span>, (<span class="number">960</span>, <span class="number">540</span>))</span><br><span class="line"><span class="comment"># 缩放大小</span></span><br><span class="line"><span class="comment"># top_img.thumbnail((320, 240)) 因为thumbnail会保持宽高比，实际大小为240*240</span></span><br><span class="line">top_img = top_img.resize((<span class="number">480</span>, <span class="number">270</span>), Image.ANTIALIAS)</span><br><span class="line">top_img.show()</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">960</span>):</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">540</span>):</span><br><span class="line">        <span class="keyword">if</span> (x % <span class="number">2</span> == <span class="number">0</span>) <span class="keyword">and</span> (y % <span class="number">2</span> == <span class="number">0</span>):</span><br><span class="line">            <span class="comment"># 获取当前图片的像素</span></span><br><span class="line">            color = draw_top_img.getpixel((x // <span class="number">2</span>, y // <span class="number">2</span>))</span><br><span class="line">            <span class="comment"># 然后再放入新像素里</span></span><br><span class="line">        <span class="keyword">elif</span> (x % <span class="number">2</span> == <span class="number">1</span>) <span class="keyword">and</span> (y % <span class="number">2</span> == <span class="number">1</span>):</span><br><span class="line">            color = draw_top_img.getpixel((x // <span class="number">2</span>, y // <span class="number">2</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            color = top_img.getpixel((x // <span class="number">2</span>, y // <span class="number">2</span>))</span><br><span class="line">        output_top_img.putpixel((x, y), value=color)</span><br><span class="line">output_top_img.show()</span><br><span class="line">output_top_img.save(<span class="string">"output/try.png"</span>)</span><br><span class="line">draw_top_img.save(<span class="string">"output/draw.png"</span>)</span><br></pre></td></tr></tbody></table></figure><p><img src="https://i.loli.net/2020/11/14/toJBKS8TMUdWv6s.png" alt="藏文字的图"></p><p><img src="https://i.loli.net/2020/11/14/248rDqWKUiw3TJp.png" alt="合成的图片"></p><p>所以点击进入下一关： <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/evil.html">http://www.pythonchallenge.com/pc/return/evil.html</a></p><h2 id="level-12-evil-2020-11-7">level_12_evil_2020.11.7</h2><p>Link: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/evil.html">http://www.pythonchallenge.com/pc/return/evil.html</a></p><p><img src="https://i.loli.net/2020/11/14/bkphDU3lxgujKGN.png" alt="level_12_evil"></p><p><strong>🖊Learned</strong><br>data[i::5]每个五个取一个,得到的就是按顺序发的牌嘛!</p><p><strong>🔑Solution</strong></p><p>一开始看见这图片的像素有问题，试着用level11的方法处理的一下，果不其然——</p><p>这图是由4张一样图合并出来的，然而并没有什么用🤮</p><p>发现封面图片被命名为evil1，因为图片描述的是发牌，于是自然想到evil2，evil3，evil4<br><a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/evil2.jpg">http://www.pythonchallenge.com/pc/return/evil2.jpg</a></p><p><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201227090034-2020-12-27.png" alt="evil2，not jpg-_.gfx"><br><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201227090127-2020-12-27.png" alt="evil3，no more evils..."></p><p>用edge打开http://www.pythonchallenge.com/pc/return/evil4.jpg<br>得到的只是一个小方格<br><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201227090510-2020-12-27.png" alt="evil4"><br>但是到了IE竟然就显示"Bert is evil! go back!" 这句话暂时不知道有什么用，留着！<br><img src="https://i.loli.net/2020/11/14/PSUwEAVN2fmOZrH.png" alt=""></p><p>目前所以关键线索在evil2身上，点击http://www.pythonchallenge.com/pc/return/evil2.gfx<br>自动下载evil2.gfx文件，打开之后发现是二进制文件<br>根据封面图的牌被分成了五份，于是猜想也要将gfx文件分五份</p><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">"assets/evil2.gfx"</span>, <span class="string">"rb"</span>) <span class="keyword">as</span> gfx:</span><br><span class="line">    data = gfx.read()</span><br><span class="line">    <span class="comment"># print(data) 二进制数据</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    piece = data[i::<span class="number">5</span>] <span class="comment"># 为什么要每隔5个取一个呢？——dealing card 😶</span></span><br><span class="line">    im = Image.<span class="built_in">open</span>(io.BytesIO(piece))  <span class="comment"># 为的是看图片 </span></span><br><span class="line">    <span class="comment"># im.show() #发现预览第四张图有问题？OSError: image file is truncated 说图像文件被截断</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">"output/level_12_%d.%s"</span> % (i, im.<span class="built_in">format</span>.lower()), <span class="string">"wb"</span>) <span class="keyword">as</span> w:</span><br><span class="line">        w.write(piece) <span class="comment"># 写入文件</span></span><br></pre></td></tr></tbody></table></figure><p>最后得到四张图</p><p>&lt;top_img src=“<a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/college-2020-12-27.jpg">https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/college-2020-12-27.jpg</a>” height=500px&gt;</p><p>所以答案就是disproportional啦<br><a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/disproportional.html">点击进入下一关</a></p><h2 id="level-13-XML-RPC-2020-11-8">level_13_XML-RPC_2020.11.8</h2><p>Link: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/disproportional.html">http://www.pythonchallenge.com/pc/return/disproportional.html</a></p><p>暂时决定虽然要坚持每天闯一关，但是就少废话了，花更多的时间记录python相关知识，学学pandas、matplotlib可能更理智点，没必要把解题过程详细码出来（反正基本都是参考别人的）</p><p><strong>🖊Learned</strong><br><strong>XML-RPC:</strong><br>XML-RPC（XML Remote Procedure Call，即XML远程方法调用），RPC是Remote Procedure Call的缩写，即远程方法调用，是一种在本地的机器上调用远端机器上的一个过程（方法）的技术，这个过程也被大家称为“分布式计算”，是为了提高各个分立机器的“互操作性”而发明出来的技术。</p><p>这种远程过程调用使用http作为传输协议，xml作为传送信息的编码格式。</p><p><strong>🔑Solution</strong><br>网页源代码，phone that<remote>evil，提示拨打给远程的evil</remote></p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>call him<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"../style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">top_img</span> <span class="attr">src</span>=<span class="string">"disprop.jpg"</span> <span class="attr">width</span>=<span class="string">"640"</span> <span class="attr">height</span>=<span class="string">"480"</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">usemap</span>=<span class="string">"#evil"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">map</span> <span class="attr">name</span>=<span class="string">"evil"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">"circle"</span> <span class="attr">coords</span>=<span class="string">"326,177,45"</span> <span class="attr">href</span>=<span class="string">"../phonebook.php"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"gold"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span></span><br><span class="line">	phone that <span class="tag">&lt;<span class="name">remote</span> /&gt;</span> evil</span><br><span class="line"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>打开phonebook.php，得到一个xml但是报错了</p><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">methodResponse</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fault</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">struct</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">member</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>faultCode<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">int</span>&gt;</span>105<span class="tag">&lt;/<span class="name">int</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">member</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">member</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>faultString<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span>XML error: Invalid document end at line 1, column 1<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">member</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">struct</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">fault</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">methodResponse</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> xmlrpc.client</span><br><span class="line"></span><br><span class="line">url = <span class="string">"http://www.pythonchallenge.com/pc/phonebook.php"</span></span><br><span class="line">conn = xmlrpc.client.ServerProxy(url)</span><br><span class="line">print(conn.system.listMethods())</span><br><span class="line"><span class="comment"># ['phone', 'system.listMethods', 'system.methodHelp', 'system.methodSignature', 'system.multicall', 'system.getCapabilities']</span></span><br><span class="line"><span class="comment"># 看到方法中有phone</span></span><br><span class="line">print(conn.system.methodHelp(<span class="string">"phone"</span>))<span class="comment"># Returns the phone of a person</span></span><br><span class="line">print(conn.system.methodSignature(<span class="string">"phone"</span>))  <span class="comment"># [['string', 'string']]</span></span><br><span class="line">print(conn.phone(<span class="string">"Bert"</span>))  <span class="comment"># 还记得evil4.jpg的"Bert is evil! go back!"吗？</span></span><br><span class="line"><span class="comment"># 最终结果555-ITALY</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>点击进入下一关： <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/italy.html">http://www.pythonchallenge.com/pc/return/italy.html</a></p><h2 id="level-14-italy-2020-11-9">level_14_italy_2020.11.9</h2><p><img src="https://pic4.zhtop_img.com/80/v2-f5f7c5f6878289bfd2e95d5ab99826bd.png" alt=""></p><p><strong>🖊Learned</strong><br>这一关主要靠算法<br><code>directions = [(1,0),(0,1),(-1,0),(0,-1)]</code>这种方式真的巧妙<br>像这种绕圈的时候要把长度*2(l=100,d=200),这样通过step = d//2, d -= 1, 就可以得到螺线式走走法</p><p><strong>🔑Solution</strong><br>通过这图里的圈圈面包,猜测要把下面的wire.png也绕成一团</p><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line">im = Image.<span class="built_in">open</span>(<span class="string">'assets/wire.png'</span>)</span><br><span class="line">print(im.size)  <span class="comment"># (10000, 1),是一个长条</span></span><br><span class="line">hint_im = Image.new(<span class="string">'RGB'</span>, (<span class="number">100</span>, <span class="number">100</span>))</span><br><span class="line">directions = [(<span class="number">1</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">1</span>),(<span class="number">-1</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">-1</span>)]</span><br><span class="line">x, y, p = <span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span> <span class="comment"># x从-1开始,这样第一个点为(0,0)</span></span><br><span class="line">d = <span class="number">200</span>  <span class="comment"># 步长设为200，是为了出现(100，99，99，98),(98,97,97,96)...的螺线性走法</span></span><br><span class="line"><span class="keyword">while</span> d &gt; <span class="number">0</span>:</span><br><span class="line">    <span class="comment"># 跑一圈</span></span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> directions:</span><br><span class="line">        steps =d//<span class="number">2</span></span><br><span class="line">        <span class="comment"># 跑一条直线</span></span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> <span class="built_in">range</span>(steps):</span><br><span class="line">            x,y =x+v[<span class="number">0</span>],y+v[<span class="number">-1</span>]</span><br><span class="line">            hint_im.putpixel((x, y), im.getpixel((p, <span class="number">0</span>)))</span><br><span class="line">            p += <span class="number">1</span></span><br><span class="line">        d -= <span class="number">1</span></span><br><span class="line">hint_im.show()</span><br><span class="line">hint_im.save(<span class="string">'output/level_14_hint.top_img'</span>)</span><br></pre></td></tr></tbody></table></figure><p>得到猫图<br><img src="https://pic4.zhtop_img.com/80/v2-33a36f418680e298e730f27701b0b200.png" alt="cat"></p><p>另外如果把d改为100的话，会得到一张蛮有意思的图</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line">im = Image.<span class="built_in">open</span>(<span class="string">'assets/wire.png'</span>)</span><br><span class="line">print(im.size)  <span class="comment"># (10000, 1)</span></span><br><span class="line">hint_im = Image.new(<span class="string">'RGB'</span>, (<span class="number">100</span>, <span class="number">100</span>))</span><br><span class="line">delta = [(<span class="number">1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">-1</span>, <span class="number">0</span>), (<span class="number">0</span>, <span class="number">-1</span>)]</span><br><span class="line">x, y, p = <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">d = <span class="number">100</span>  <span class="comment"># 如果直接设置为100，步长就成了100，99，98，97...</span></span><br><span class="line"><span class="keyword">while</span> d &gt; <span class="number">0</span>:</span><br><span class="line">    <span class="comment"># 跑一圈</span></span><br><span class="line">    <span class="keyword">for</span> v <span class="keyword">in</span> delta:</span><br><span class="line">        steps = d</span><br><span class="line">        <span class="comment"># 跑一条直线</span></span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> <span class="built_in">range</span>(steps):</span><br><span class="line">            x, y = x+v[<span class="number">0</span>], y+v[<span class="number">-1</span>]</span><br><span class="line">            hint_im.putpixel((x, y), im.getpixel((p, <span class="number">0</span>)))</span><br><span class="line">            p += <span class="number">1</span></span><br><span class="line">        d -= <span class="number">1</span></span><br><span class="line">hint_im.show()</span><br></pre></td></tr></tbody></table></figure><p><img src="https://pic4.zhtop_img.com/80/v2-0e9fa3f9c977e3ed693b4f080e58bf65.png" alt=""><br>于是点击：<a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/cat.html">http://www.pythonchallenge.com/pc/return/cat.html</a><br>得到hint: and its name is uzi. you’ll hear from him later.<br>再点击：<a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/uzi.html">http://www.pythonchallenge.com/pc/return/uzi.html</a><br>进入level 15</p><h2 id="level-15-datetime-2020-11-10">level_15_datetime _2020.11.10</h2><p><img src="https://pic4.zhtop_img.com/80/v2-0f8c17a3b2936d56ed46e504409fb451.png" alt=""></p><p><strong>🖊Learned</strong><br>datetime<br><code>d = datetime.date(year, 1, 26)</code>创建一个日期对象<br><code>d.isoweeklevel()</code> 返回今天是星期几,Monlevel==1,Sunlevel==7</p><p>calendar判断闰年</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 判断闰年</span></span><br><span class="line">print(calendar.isleap(<span class="number">1006</span>))  <span class="comment"># 结果为 False</span></span><br><span class="line">print(calendar.isleap(<span class="number">1016</span>))  <span class="comment"># 结果为 True</span></span><br></pre></td></tr></tbody></table></figure><p><strong>🔑Solution</strong></p><blockquote><p>Combinated with all hints,so we are looking for a person, who’s related to that particular date, and he is not the youngest…<br>The key is to find what year it was.</p></blockquote><p>于是这一关就是要找到正确的日期,再通过日期来推测那个人是谁<br>日历上显示的是1__6年1月26日为星期一,再看图片下方显示二月有29天,所以这一年就还闰年,所以就可以通过遍历找到符合条件的年份</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断闰年</span></span><br><span class="line">print(calendar.isleap(<span class="number">1006</span>))  <span class="comment"># 结果为 False</span></span><br><span class="line">print(calendar.isleap(<span class="number">1016</span>))  <span class="comment"># 结果为 True</span></span><br><span class="line"><span class="comment"># 所以从1016年开始每20年检查一次</span></span><br><span class="line"><span class="keyword">for</span> year <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1016</span>, <span class="number">1996</span>, <span class="number">20</span>):</span><br><span class="line">    d = datetime.date(year, <span class="number">1</span>, <span class="number">26</span>)</span><br><span class="line">    <span class="keyword">if</span> d.isoweeklevel() == <span class="number">1</span>:  <span class="comment"># return level of the week, where Monlevel==1,Sunlevel==7</span></span><br><span class="line">        print(d.year)</span><br><span class="line"></span><br><span class="line"><span class="comment">#####output###</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">1176</span></span><br><span class="line"><span class="string">1356</span></span><br><span class="line"><span class="string">1576</span></span><br><span class="line"><span class="string">1756</span></span><br><span class="line"><span class="string">1976</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hint: &lt;!-- he ain't the youngest, he is the second --&gt;</span></span><br><span class="line"><span class="comment"># so we choose 1756</span></span><br><span class="line"><span class="comment"># hint: &lt;!-- todo: buy flowers for tomorrow --&gt;</span></span><br><span class="line"><span class="comment"># so we look at 1756-1-27</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>search the Internet,it turns out that level is the birthlevel of Morzart<br><img src="https://pic4.zhtop_img.com/80/v2-ad0333fa1bed4567f48c101b475c72c8.png" alt=""></p><p>so click this <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/mozart.html">link</a>, to level 16</p><p>PS: I just found writing in Engslish is much more convinent for markdown</p><h2 id="level-16-ImageChops-numpy-roll-2020-11-11">level_16_ImageChops &amp; numpy.roll_2020.11.11</h2><p>Link : <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/mozart.html">http://www.pythonchallenge.com/pc/return/mozart.html</a></p><p>今天双十一啦，可惜我啥也没买，继续刷题吧！<br><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201229213540-2020-12-29.png" alt=""></p><p><strong>🖊Learned</strong><br>今日所学<br>ImageChops 模块包含许多算术图像操作，称为通道操作（“chops”）。这些可以用于各种用途，包括特殊效果、图像合成、算法绘制等</p><ul><li>Image.histogram()返回图像的直方图。直方图作为像素计数列表返回，它的x轴是像素值，y轴是对应的像素在图像里的数量。</li><li>PIL.ImageChops.offset(image, xoffset, yoffset=None),返回数据被给定距离偏移的图像的副本。数据环绕边缘。如果 yoffset 如果省略，则假定等于 X偏移.</li><li>Image.paste(im,box)将一张图粘贴到另一张图像上。变量box或者是一个给定左上角的2元组，或者是定义了左，上，右和下像素坐标的4元组，或者为空（与（0，0）一样）。如果给定4元组，被粘贴的图像的尺寸必须与区域尺寸一样。</li></ul><p>NumPy 是一个主要用于数组计算的数学库</p><ul><li>np.array(image),image类 转 numpy，一行一行的用数字代表各个像素</li><li>tolist()将数组或者矩阵转换成列表</li><li>list.index(),从列表中找出某个值第一个匹配项的索引位置。</li><li>numpy.roll(a,&nbsp;shift,&nbsp;axis=None)沿着给定轴滚动数组元素。超出最后位置的元素将会滚动到第一个位置。</li></ul><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">a1 = np.array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>])</span><br><span class="line">print(np.roll(a1, <span class="number">-2</span>))  <span class="comment"># [ 2  3  4  5  6  7  8  9 10  0  1]</span></span><br></pre></td></tr></tbody></table></figure><p><strong>🔑Solution</strong><br>方法一：使用ImageChops.offset()对图像进行偏移</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageChops</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># NumPy 是一个主要用于数组计算的数学库</span></span><br><span class="line"><span class="comment"># ImageChops 模块包含许多算术图像操作，称为通道操作（“chops”）。这些可以用于各种用途，包括特殊效果、图像合成、算法绘制等</span></span><br><span class="line"></span><br><span class="line">image = Image.<span class="built_in">open</span>(<span class="string">"assets/mozart.gif"</span>)</span><br><span class="line"><span class="comment"># 生成图像像素直方图，找到频数正好为image.height的整倍的，因为从图中可以看到pink每行都出现了</span></span><br><span class="line"><span class="comment"># 我们的任务就是把每行像素都移动，让pink组成一整块</span></span><br><span class="line">frequency =[x <span class="keyword">for</span> x <span class="keyword">in</span> image.histogram() <span class="keyword">if</span> x % image.height == <span class="number">0</span> <span class="keyword">and</span> x != <span class="number">0</span>]</span><br><span class="line">print(frequency) <span class="comment"># [2400]</span></span><br><span class="line">print(image.histogram().index(<span class="number">2400</span>)) <span class="comment"># 返回频次为2400的x轴坐标195，即pink颜色</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看是不是这个颜色</span></span><br><span class="line">tmp = image.copy()</span><br><span class="line">tmp.frombytes(<span class="built_in">bytes</span>([<span class="number">195</span>] * (tmp.height * tmp.width)))</span><br><span class="line">tmp.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对图片每行偏移</span></span><br><span class="line"><span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(image.size[<span class="number">1</span>]):</span><br><span class="line">    <span class="comment">#(left, upper, right, lower)-tuple.</span></span><br><span class="line">    box = <span class="number">0</span>, y, image.size[<span class="number">0</span>], y + <span class="number">1</span></span><br><span class="line">    row = image.crop(box)</span><br><span class="line">    bytes_data = row.tobytes()</span><br><span class="line">    i = bytes_data.index(<span class="number">195</span>)</span><br><span class="line">    row = ImageChops.offset(row, -i) <span class="comment"># offset 偏移量</span></span><br><span class="line">    image.paste(row, box)</span><br><span class="line"></span><br><span class="line">image.save(<span class="string">"output/level_16_mozart.gif_1.gif"</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201229213738-2020-12-29.png" alt=""><br>方法二：使用numpy.roll对图片进行偏移<br>不知道为什么得到的是灰色的？？？</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">image = Image.<span class="built_in">open</span>(<span class="string">"assets/mozart.gif"</span>)</span><br><span class="line">print(image.mode)  <span class="comment"># 模式“P”为8位彩色图像，它的每个像素用8个bit表示，其对应的彩色值是按照调色板查询出来的。</span></span><br><span class="line"><span class="comment"># roll th image</span></span><br><span class="line">shifted = [<span class="built_in">bytes</span>(np.roll(row, -row.tolist().index(<span class="number">195</span>)).tolist()) <span class="keyword">for</span> row <span class="keyword">in</span> np.array(image)]</span><br><span class="line"><span class="comment"># print(shifted)</span></span><br><span class="line"><span class="comment"># 根据二进制数据创建图像</span></span><br><span class="line">Image.frombytes(<span class="string">"P"</span>, image.size, <span class="string">b""</span>.join(shifted)).save(<span class="string">"output/level_16_mozart.gif_2"</span>) <span class="comment"># romance</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201229213813-2020-12-29.png" alt=""></p><p>click to next level: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/romance.html">http://www.pythonchallenge.com/pc/return/romance.html</a></p><h2 id="level-17-cookie-urllib-parse-2020-11-12">level_17_cookie &amp; urllib.parse_2020.11.12</h2><p>这一关基本是爬虫+复习关了，好难，直接copy代码了🤢<br>参考资料：</p><ul><li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ea3ae84022e5">Python Challenge[17]-Recgat简书</a></li><li><a target="_blank" rel="noopener" href="http://kwangka.github.io/2015/01/31/pc17/">Python Challenge (Level 17)曾梦想仗剑走天涯</a></li><li><a target="_blank" rel="noopener" href="https://www.hackingnote.com/en/python-challenge-solutions/level-17">hackingnote</a></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201229214859-2020-12-29.png" alt=""><br><strong>🖊Learned</strong><br>cookie和获取cookie<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/22396872">Cookie 是什么</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/MuWinter/article/details/75313476">如何查看cookies</a></p><p>Cookie 是浏览器访问服务器后，服务器传给浏览器的一段数据。浏览器需要保存这段数据，不得轻易删除。<br>第一个作用是识别用户身份。<br>第二个作用是记录历史。<br><strong>如何获取cookie</strong></p><ul><li>使用httplib2库，cookie信息包含在httplib2.Http().request()返回的Response实例中。</li></ul><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> httplib2,re</span><br><span class="line">h = httplib2.Http(<span class="string">'.Cache'</span>)</span><br><span class="line">url, num = <span class="string">'http://www.pythonchallenge.com/pc/def/linkedlist.php?busynothing='</span>, <span class="string">'12345'</span></span><br><span class="line">pattern = re.<span class="built_in">compile</span>(<span class="string">'info=(.*)'</span>)</span><br><span class="line">info = <span class="string">''</span></span><br><span class="line"><span class="keyword">while</span> num.isdigit():</span><br><span class="line">  resp,content=h.request(url+num)</span><br><span class="line">  info += pattern.search(resp[<span class="string">'set-cookie'</span>].split(<span class="string">';'</span>)[<span class="number">0</span>]).groups()[<span class="number">0</span>]</span><br><span class="line">  num = content.decode(<span class="string">'utf-8'</span>).split(<span class="string">' '</span>)[<span class="number">-1</span>]</span><br><span class="line">print(info)</span><br></pre></td></tr></tbody></table></figure><ul><li>使用urllib库获取cookie信息</li></ul><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">h = urllib.request.urlopen(url)</span><br><span class="line">cookie = h.getheader(<span class="string">'Set-Cookie'</span>)</span><br></pre></td></tr></tbody></table></figure><p><strong>设置cookie</strong><br>Request：模拟浏览器发送GET请求（GET-从指定的资源请求数据。），就需要使用Request对象，通过往Request对象添加HTTP头，我们就可以把请求伪装成浏览器</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> Request, urlopen</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> quote_plus</span><br><span class="line">req = Request(url, headers = { <span class="string">"Cookie"</span>: <span class="string">"info="</span> + quote_plus(msg)})</span><br><span class="line">print(urlopen(req).read().decode())</span><br></pre></td></tr></tbody></table></figure><p><strong>urllib.parse</strong></p><p>parse是解析的意思，urllib.parse提供了一些辅助方法，用于对url进行编码、解码。url中是不能出现一些特殊的符号的，有些符号有特殊的用途。我们知道以get方式提交数据的时候，会在url中添加key=value这样的字符串，所以在value中是不允许有’=’，因此要对其进行编码；与此同时服务器接收到这些参数的时候，要进行解码，还原成原始的数据。<br>quote_plus：这个方法是将一些特殊的字符串转换为固定的一些符号字母数字组合</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line">d = parse.quote(<span class="string">'a&amp;b/c'</span>)  <span class="comment">#未编码斜线</span></span><br><span class="line">print(d)</span><br><span class="line"><span class="comment"># a%26b/c</span></span><br><span class="line">d1 = parse.quote_plus(<span class="string">'a&amp;b/c'</span>)  <span class="comment">#编码了斜线</span></span><br><span class="line">print(d1)</span><br><span class="line"><span class="comment"># a%26b%2Fc</span></span><br></pre></td></tr></tbody></table></figure><p>unquote/unquote_plus</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>parse.unquote(<span class="string">'1+2'</span>)  <span class="comment">#不解码加号</span></span><br><span class="line"><span class="string">'1+2'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>parse.unquote_plus(<span class="string">'1+2'</span>)  <span class="comment">#把加号解码为空格</span></span><br><span class="line"><span class="string">'1 2'</span></span><br></pre></td></tr></tbody></table></figure><p>urlencode，将一些传入的元素使用&amp;串联起来，效果如下：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;params = {</span><br><span class="line">            <span class="string">"appid"</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">"mch_id"</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">"body"</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">"out_trade_no"</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">"total_fee"</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">"spbill_create_ip"</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">"notify_url"</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">"trade_type"</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">"nonce_str"</span>: <span class="number">1</span></span><br><span class="line">        }</span><br><span class="line">&gt;&gt;&gt;parse.urlencode(params)</span><br><span class="line"><span class="string">'appid=1&amp;mch_id=1&amp;body=1&amp;out_trade_no=1&amp;total_fee=1&amp;spbill_create_ip=1&amp;notify_url=1&amp;trade_type=1&amp;nonce_str=1'</span></span><br></pre></td></tr></tbody></table></figure><p>经urllib.parse.unquote_to_bytes(string)方法转换返回的对象可以正常解压，该方法功能是将%xx转义替换为其等效的single-octet字符（unquote_plus()和unquote()是单个字符），以字节对象返回。不像unquote_plus()能将+转为空格，unquote_to_bytes()需要手动替换。</p><p><strong>🔑Solution</strong><br>refer to level 4 <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/def/linkedlist.php">http://www.pythonchallenge.com/pc/def/linkedlist.php</a></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlopen</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> unquote_plus,unquote_to_bytes</span><br><span class="line"><span class="keyword">import</span> re, bz2</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">geth</span>(<span class="params">url</span>):</span></span><br><span class="line">    i=<span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i&lt;<span class="number">3</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            h =urlopen(url,timeout=<span class="number">3</span>)</span><br><span class="line">            <span class="keyword">return</span> h</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            i +=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">num = <span class="string">'12345'</span></span><br><span class="line">info = <span class="string">''</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">    h = geth(<span class="string">'http://www.pythonchallenge.com/pc/def/linkedlist.php?busynothing='</span>+num)</span><br><span class="line">    raw = h.read().decode(<span class="string">"utf-8"</span>)</span><br><span class="line">    print(raw)</span><br><span class="line">    cookie =h.getheader(<span class="string">"Set-Cookie"</span>)</span><br><span class="line">    <span class="comment"># print(cookie)</span></span><br><span class="line">    info += re.search(<span class="string">'info=(.*?);'</span>,cookie).group(<span class="number">1</span>)</span><br><span class="line">    match = re.search(<span class="string">'the next busynothing is (\d+)'</span>,raw)</span><br><span class="line">    <span class="keyword">if</span> match ==<span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        num =match.group(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># print(info)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">BZh91AY%26SY%94%3A%E2I%00%00%21%19%80P%81</span></span><br><span class="line"><span class="string">%11%00%AFg%9E%A0+%00hE%3DM%B5%23%D0%D4%D1</span></span><br><span class="line"><span class="string">%E2%8D%06%A9%FA%26S%D4%D3%21%A1%EAi7h%9B%</span></span><br><span class="line"><span class="string">9A%2B%BF%60%22%C5WX%E1%ADL%80%E8V%3C%C6%A</span></span><br><span class="line"><span class="string">8%DBH%2632%18%A8x%01%08%21%8DS%0B%C8%AF%9</span></span><br><span class="line"><span class="string">6KO%CA2%B0%F1%BD%1Du%A0%86%05%92s%B0%92%C</span></span><br><span class="line"><span class="string">4Bc%F1w%24S%85%09%09C%AE%24%90</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">res = unquote_to_bytes(info.replace(<span class="string">"+"</span>,<span class="string">"%20"</span>)) <span class="comment"># 暂时不知道为什么要把加变成空格，不过info确实有一个+啦</span></span><br><span class="line">print(res)</span><br><span class="line">print(bz2.decompress(res).decode(<span class="string">'utf-8'</span>))</span><br><span class="line"><span class="comment"># is it the 26th already? call his father and inform him that "the flowers are on their way". he'll understand.</span></span><br><span class="line"><span class="comment"># 提示找Mozart父亲Leopold"</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>提示到第13关，继续打电话</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># refer to level 13</span></span><br><span class="line"><span class="keyword">from</span> xmlrpc.client <span class="keyword">import</span> ServerProxy</span><br><span class="line"></span><br><span class="line">conn = ServerProxy(<span class="string">"http://www.pythonchallenge.com/pc/phonebook.php"</span>)</span><br><span class="line">print(conn.phone(<span class="string">"Leopold"</span>))</span><br><span class="line"><span class="comment"># output 555-VIOLIN</span></span><br><span class="line"><span class="comment"># http://www.pythonchallenge.com/pc/return/violin.html</span></span><br><span class="line"><span class="comment"># no! i mean yes! but ../stuff/violin.php.</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>点开<a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/stuff/violin.php">violin.php</a>，根据前面的提示，告诉他爹"the flowers are on their way"</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> Request,urlopen</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> quote_plus</span><br><span class="line"></span><br><span class="line"><span class="comment">#is it the 26th already?</span></span><br><span class="line"><span class="comment"># call his father and inform him that "the flowers are on their way". he'll understand.</span></span><br><span class="line">url = <span class="string">"http://www.pythonchallenge.com/pc/stuff/violin.php"</span></span><br><span class="line">msg = <span class="string">"the flowers are on their way"</span></span><br><span class="line">req = Request(url, headers={<span class="string">"Cookie"</span>: <span class="string">"info="</span> + quote_plus(msg)})</span><br><span class="line">print(urlopen(req).read().decode())</span><br></pre></td></tr></tbody></table></figure><p><strong>output</strong></p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>it's me. what do you want?<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"../style.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">center</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"gold"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">top_img</span> <span class="attr">src</span>=<span class="string">"leopold.jpg"</span> <span class="attr">border</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">oh well, don't you dare to forget the balloons.<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="level-18-ballons-2020-11-13">level_18_ballons_2020.11.13</h2><p>Link: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/balloons.html">http://www.pythonchallenge.com/pc/return/balloons.html</a></p><p><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201229215541-2020-12-29.png" alt=""></p><p><strong>🖊Learned</strong><br>1.区分两个数据的异同difflib.Differ().compare(a, b)<br><code>difflib.Differ().compare(a, b)</code> will generate<br>lines start with +: appear in a not in b<br>lines start with -: appear in b not in a<br>others: appear in both</p><p>2.bytes()&amp;int(str,16)<br>16进制形式的字符如何转成字节码，用bytes()<br>首先要先用int(str,16)将字符列表转化为10进制的数字列表，才能用bytes()</p><p>3.list [:53]<br>忘了，列表切片是左开右闭了……😳</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">bytes</span>([<span class="number">74</span>, <span class="number">158</span>, <span class="number">198</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">185</span>, <span class="number">141</span>, <span class="number">219</span>, <span class="number">243</span>, <span class="number">80</span>, <span class="number">141</span>, <span class="number">74</span>, <span class="number">100</span>, <span class="number">112</span>, <span class="number">154</span>, <span class="number">121</span>, <span class="number">49</span>, <span class="number">149</span>])</span><br><span class="line"><span class="comment"># → b'J\x9e\xc6\x05\n\xb9\x8d\xdb\xf3P\x8dJdp\x9ay1\x95'</span></span><br></pre></td></tr></tbody></table></figure><p><strong>🔑Solution</strong><br>go to <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/bright.html">http://www.pythonchallenge.com/pc/return/bright.html</a> , then show</p><blockquote><p>ness<br>so go to <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/return/brightness.html">http://www.pythonchallenge.com/pc/return/brightness.html</a><br>maybe consider deltas.gz</p></blockquote><p>下载delta.gz,打开delta.txt，明显看到两栏很相似的信息，前面提示这一关要tell the difference，对于这两栏的信息，我们要用到difflib来比较它们，然后将得到的信息decode，输出为三张图片</p><p><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201229215755-2020-12-29.png" alt=""></p><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line"><span class="keyword">import</span> difflib</span><br><span class="line"></span><br><span class="line">data = gzip.<span class="built_in">open</span>(<span class="string">"assets/deltas.gz"</span>)</span><br><span class="line">d1, d2 = [], []</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> data:</span><br><span class="line">    d1.append(line[:<span class="number">53</span>].decode()+<span class="string">'\n'</span>)  <span class="comment"># 选择53是列表左开右闭，记得每一行需要手动加\n</span></span><br><span class="line">    d2.append(line[<span class="number">56</span>:].decode())  <span class="comment"># 因为后面自带\n</span></span><br><span class="line"></span><br><span class="line">compare = difflib.Differ().compare(d1, d2)</span><br><span class="line"></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">"output/level_18_f.png"</span>, <span class="string">"wb"</span>)</span><br><span class="line">f1 = <span class="built_in">open</span>(<span class="string">"output/level_18_f1.png"</span>, <span class="string">"wb"</span>)</span><br><span class="line">f2 = <span class="built_in">open</span>(<span class="string">"output/level_18_f2.png"</span>, <span class="string">"wb"</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> compare:</span><br><span class="line">    <span class="comment"># print(line)</span></span><br><span class="line">    <span class="comment"># print([int(hex, 16) for hex in line[2:].strip().split(" ") if hex])</span></span><br><span class="line">    bs = <span class="built_in">bytes</span>([<span class="built_in">int</span>(<span class="built_in">hex</span>, <span class="number">16</span>) <span class="keyword">for</span> <span class="built_in">hex</span> <span class="keyword">in</span> line[<span class="number">2</span>:].strip().split(<span class="string">" "</span>) <span class="keyword">if</span> <span class="built_in">hex</span>])</span><br><span class="line">    print(bs)</span><br><span class="line">    <span class="comment"># appear in d1 not in d2</span></span><br><span class="line">    <span class="keyword">if</span> line[<span class="number">0</span>] == <span class="string">'+'</span>:</span><br><span class="line">        f1.write(bs)</span><br><span class="line">    <span class="comment"># appear in d2 not in d1</span></span><br><span class="line">    <span class="keyword">elif</span> line[<span class="number">0</span>] == <span class="string">'-'</span>:</span><br><span class="line">        f2.write(bs)</span><br><span class="line">    <span class="comment"># appear in both</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        f.write(bs)</span><br><span class="line"></span><br><span class="line">f.close()</span><br><span class="line">f1.close()</span><br><span class="line">f2.close()</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><img src="https://pic4.zhtop_img.com/80/v2-52ca5bb9b74c6c1a7d80ee1d58d94be0.png" alt="f"></p><p><img src="https://pic4.zhtop_img.com/80/v2-4df5f46e8ff0e6af8a5f8b355c32574f.png" alt="f1"></p><p><img src="https://pic4.zhtop_img.com/80/v2-b2d6a66e7468e84f9e2fc1c7ce145539.png" alt="f2"></p><p>so next level: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/hex/bin.html">http://www.pythonchallenge.com/pc/hex/bin.html</a></p><h2 id="level-19-bin-2020-11-14">level_19_bin_2020.11.14</h2><p>Link: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/hex/bin.html">http://www.pythonchallenge.com/pc/hex/bin.html</a><br>username: butter<br>password: fly</p><p><strong>🖊Learned</strong><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yongdaimi/p/10722355.html">音频属性相关：声道、采样率、采样位数、样本格式、比特率</a></p><blockquote><p>WAV有三个重要的参数：声道数、取样频率和量化位数。<br>声道数：可以是单声道或者是双声道<br>采样频率：一秒内对声音信号的采集次数，常用的有8kHz, 16kHz, 32kHz, 48kHz, 11.025kHz, 22.05kHz, 44.1kHz<br>量化位数：用多少bit表达一次采样所采集的数据，通常有8bit、16bit、24bit和32bit等几种<br>Wave_read.getnchannels()<br>返回声道数量（1 为单声道，2 为立体声）</p><p>Wave_read.getsampwidth()<br>返回采样字节长度。</p><p>Wave_read.getframerate()<br>返回采样频率。</p><p>Wave_read.getnframes()<br>返回音频总帧数。<br>Wave_read.readframes(n)<br>读取并返回以 bytes 对象表示的最多 n 帧音频。</p></blockquote><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> wave</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将view-source:http://www.pythonchallenge.com/pc/hex/bin.html的base64编码复制为文本处理</span></span><br><span class="line">message = <span class="built_in">open</span>(<span class="string">"assets/level_19.txt"</span>, <span class="string">"rb"</span>).read()</span><br><span class="line"><span class="built_in">open</span>(<span class="string">'output/level_19_indian.wav'</span>, <span class="string">'wb'</span>).write(base64.decodebytes(message))</span><br></pre></td></tr></tbody></table></figure><p>得到的wav打开之后听到sorry……<br>打开http://www.pythonchallenge.com/pc/hex/sorry.html<br>得到- “what are you apologizing for?”<br>回头看网页显示的地图，陆地的颜色明显和海洋的颜色颠倒了，提示将音频的帧颠倒</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">w = wave.<span class="built_in">open</span>(<span class="string">'output/level_19_indian.wav'</span>, <span class="string">"rb"</span>)</span><br><span class="line">h = wave.<span class="built_in">open</span>(<span class="string">'output/level_19_result.wav'</span>, <span class="string">"wb"</span>)</span><br><span class="line">print(w.getnchannels())</span><br><span class="line">print(w.getsampwidth())</span><br><span class="line">print(w.getframerate())</span><br><span class="line">h.setnchannels(w.getnchannels())</span><br><span class="line">h.setsampwidth(w.getsampwidth()//<span class="number">2</span>)</span><br><span class="line">h.setframerate(w.getframerate()*<span class="number">2</span>)</span><br><span class="line">frames = w.readframes(w.getnframes())</span><br><span class="line"><span class="comment"># big_endiana 字节序，低地址端 存放 高位字节。</span></span><br><span class="line">wave.big_endiana = <span class="number">1</span></span><br><span class="line">h.writeframes(frames)</span><br><span class="line"><span class="comment"># for i in range(w.getnframes()):</span></span><br><span class="line"><span class="comment">#     h.writeframes(w.readframes(1)[::-1])</span></span><br><span class="line"></span><br><span class="line">h.close()</span><br></pre></td></tr></tbody></table></figure><p>听出You are a idiot<br>打开 <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/hex/idiot.html">http://www.pythonchallenge.com/pc/hex/idiot.html</a><br>“Now you should apologize…”<br><a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/hex/idiot2.html">http://www.pythonchallenge.com/pc/hex/idiot2.html</a></p><h2 id="level-20-idiot2-2020-11-15">level_20_idiot2_2020.11.15</h2><p>开始用Jupyter跑python代码了，感觉飞起呀！！！！</p><p>又是看不懂的一关，直接copy网上的代码吧……</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request, base64,re</span><br><span class="line"></span><br><span class="line">request = urllib.request.Request(<span class="string">'http://www.pythonchallenge.com/pc/hex/unreal.jpg'</span>)</span><br><span class="line">cred = base64.b64encode(<span class="string">b"butter:fly"</span>)</span><br><span class="line">request.add_header(<span class="string">"Authorization"</span>, <span class="string">"Basic %s"</span> % cred.decode())</span><br><span class="line">print(request.headers)</span><br><span class="line"><span class="comment"># {'Authorization': 'Basic YnV0dGVyOmZseQ=='}</span></span><br><span class="line"></span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line">print(response.headers)</span><br></pre></td></tr></tbody></table></figure><pre><code>{'Authorization': 'Basic YnV0dGVyOmZseQ=='}
Content-Type: image/jpeg
Content-Range: bytes 0-30202/2123456789
Connection: close
Transfer-Encoding: chunked
Date: Sun, 15 Nov 2020 05:52:24 GMT
Server: lighttpd/1.4.35
</code></pre><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">pattern = re.<span class="built_in">compile</span>(<span class="string">'bytes (\d+)-(\d+)/(\d+)'</span>)</span><br><span class="line">content_range = response.headers[<span class="string">'content-range'</span>]</span><br><span class="line">(start, end, length) = pattern.search(content_range).groups()</span><br><span class="line">request.headers[<span class="string">'Range'</span>] = <span class="string">'bytes=%i-'</span> % (<span class="built_in">int</span>(end) + <span class="number">1</span>)</span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line">print(response.headers)</span><br><span class="line"></span><br><span class="line">print(response.read().decode())</span><br></pre></td></tr></tbody></table></figure><pre><code>Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-Range: bytes 30237-30283/2123456789
Connection: close
Transfer-Encoding: chunked
Date: Sun, 15 Nov 2020 05:52:40 GMT
Server: lighttpd/1.4.35


we can go on in this way for really long time.
</code></pre><p>So now the content between 30203 and 30236 is served, which is “Why don’t you respect my privacy?”; continue for a few iterations:</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">pattern = re.<span class="built_in">compile</span>(<span class="string">'bytes (\d+)-(\d+)/(\d+)'</span>)</span><br><span class="line">content_range = response.headers[<span class="string">'content-range'</span>]</span><br><span class="line">(start, end, length) = pattern.search(content_range).groups()</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        request.headers[<span class="string">'Range'</span>] = <span class="string">'bytes=%i-'</span> % (<span class="built_in">int</span>(end) + <span class="number">1</span>)</span><br><span class="line">        response = urllib.request.urlopen(request)</span><br><span class="line">        print(response.read().decode())</span><br><span class="line">        print(response.headers)</span><br><span class="line">        (start, end, length) = pattern.search(response.headers[<span class="string">'content-range'</span>]).groups()</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></tbody></table></figure><pre><code>stop this!

Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-Range: bytes 30284-30294/2123456789
Connection: close
Transfer-Encoding: chunked
Date: Sun, 15 Nov 2020 05:53:12 GMT
Server: lighttpd/1.4.35


invader! invader!

Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-Range: bytes 30295-30312/2123456789
Connection: close
Transfer-Encoding: chunked
Date: Sun, 15 Nov 2020 05:53:13 GMT
Server: lighttpd/1.4.35

ok, invader. you are inside now. 

Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-Range: bytes 30313-30346/2123456789
Connection: close
Transfer-Encoding: chunked
Date: Sun, 15 Nov 2020 05:53:13 GMT
Server: lighttpd/1.4.35
</code></pre><p>The last request ends at 30346.</p><blockquote><p>Why don’t you respect my privacy?<br>we can go on in this way for really long time.<br>stop this!<br>invader! invader!<br>ok, invader. you are inside now.</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">request.headers[<span class="string">'Range'</span>] = <span class="string">'bytes=%i-'</span> % (<span class="built_in">int</span>(length) + <span class="number">1</span>)</span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line">print(response.headers)</span><br><span class="line">print(response.read().decode())</span><br></pre></td></tr></tbody></table></figure><pre><code>Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-Range: bytes 2123456744-2123456788/2123456789
Connection: close
Transfer-Encoding: chunked
Date: Sun, 15 Nov 2020 05:54:13 GMT
Server: lighttpd/1.4.35



esrever ni emankcin wen ruoy si drowssap eht
</code></pre><p>​</p><p>The content is reversed: “the password is your new nickname in reverse”. The “nickname” is “invader”, so password is “redavni”. Now “reverse” the search:</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">request.headers[<span class="string">'Range'</span>] = <span class="string">'bytes=2123456743-'</span></span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line">print(response.headers)</span><br><span class="line">print(response.read().decode())</span><br></pre></td></tr></tbody></table></figure><pre><code>Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-Range: bytes 2123456712-2123456743/2123456789
Connection: close
Transfer-Encoding: chunked
Date: Sun, 15 Nov 2020 05:54:52 GMT
Server: lighttpd/1.4.35


and it is hiding at 1152983631.
</code></pre><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">request.headers[<span class="string">'Range'</span>] = <span class="string">'bytes=1152983631-'</span></span><br><span class="line">response = urllib.request.urlopen(request)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">"output/level_21.zip"</span>, <span class="string">"wb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(response.read())</span><br></pre></td></tr></tbody></table></figure><p>Yes! This is really level 21 in here.<br>And yes, After you solve it, you’ll be in level 22!</p><p>Now for the level:</p><ul><li>We used to play this game when we were kids</li><li>When I had no idea what to do, I looked backwards.</li></ul><h2 id="level-21-2020-11-17">level_21_2020.11.17</h2><blockquote><p>啊啊啊啊，昨天忙着做分子生物学作业和整hexo的域名，后来24：00电脑准时没电关机啦，只好厚脸皮今天补啦！</p></blockquote><blockquote><p>Yes! This is really level 21 in here. And yes, After you solve &gt;it, you’ll be in level 22!<br>Now for the level:<br>We used to play this game when we were kids<br>When I had no idea what to do, I looked backwards.</p></blockquote><p>这一关主要过程是对package.pack文件不断进行解压。根据上一次解压得到的结果，判断下一次解压用zlib还是bz2，以及判断得到的数据是正向的还是要reverse.<br>考察多种编码格式的运用，观察“package.pack”中的数据，发现是以b"x\x9c"开头的，这是zlib算法压缩的数据，使用zlib模块解码。重复几次，发现有以b"BZ"开头的，这是bz2压缩的数据，使用bz2模块解码。又重复几次，发现有以b"\x80\x8d"开头的，看看第2条提示，发现字节流是以b"\x9cx"结尾的，反转整个字节流。最终得到一句话“look at your logs”。</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> zlib</span><br><span class="line"><span class="keyword">import</span> bz2</span><br><span class="line"></span><br><span class="line">result = <span class="string">""</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">"output/package.pack"</span>, <span class="string">"rb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = f.read()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="comment">#x\x9c是zlib压缩的开头</span></span><br><span class="line">        <span class="keyword">if</span> data.startswith(<span class="string">b'x\x9c'</span>):</span><br><span class="line">            data = zlib.decompress(data)</span><br><span class="line">            result += <span class="string">' '</span></span><br><span class="line">        <span class="comment"># BZHbzip2 压缩编码</span></span><br><span class="line">        <span class="keyword">elif</span> data.startswith(<span class="string">b'BZh'</span>):</span><br><span class="line">            data = bz2.decompress(data)</span><br><span class="line">            result += <span class="string">'#'</span></span><br><span class="line">        <span class="comment"># When I had no idea what to do, I looked backwards.</span></span><br><span class="line">        <span class="keyword">elif</span> data.endswith(<span class="string">b'\x9cx'</span>):</span><br><span class="line">            data = data[::<span class="number">-1</span>]</span><br><span class="line">            result += <span class="string">'\n'</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    print(data)</span><br><span class="line"><span class="comment"># b'sgol ruoy ta kool'</span></span><br><span class="line"><span class="comment">### reverse</span></span><br><span class="line"><span class="comment">#look at your logs</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">#?? 没有 logs 啊，记录变化？这里有变化的就是压缩方法,就把这三种方法编号一下</span></span><br><span class="line">    print(result)</span><br></pre></td></tr></tbody></table></figure><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">    ###          ###      ########    ########    ##########  ########  </span><br><span class="line">  #######      #######    #########   #########   #########   ######### </span><br><span class="line"> ##     ##    ##     ##   ##      ##  ##      ##  ##          ##      ##</span><br><span class="line">##           ##       ##  ##      ##  ##      ##  ##          ##      ##</span><br><span class="line">##           ##       ##  #########   #########   ########    ######### </span><br><span class="line">##           ##       ##  ########    ########    ########    ########  </span><br><span class="line">##           ##       ##  ##          ##          ##          ##   ##   </span><br><span class="line"> ##     ##    ##     ##   ##          ##          ##          ##    ##  </span><br><span class="line">  #######      #######    ##          ##          #########   ##     ## </span><br><span class="line">    ###          ###      ##          ##          ##########  ##      ##</span><br></pre></td></tr></tbody></table></figure><h2 id="level-22-2020-11-17">level_22_2020.11.17</h2><p><a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/hex/copper.html">http://www.pythonchallenge.com/pc/hex/copper.html</a></p><p><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201229220700-2020-12-29.png" alt=""><br><strong>🔑Solution</strong></p><p>查看源代码提示下载文件“white.gif”<a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/hex/white.gif">http://www.pythonchallenge.com/pc/hex/white.gif</a></p><p>发现每一帧都是黑的，但每一帧都有一个像素点不是纯黑的 RGB != (0,0,0)，且该像素都在中心点(100,100)附近，再由游戏摇杆得到启发。举例来说，详见下表</p><table><thead><tr><th>帧</th><th>非黑点位置</th><th>实际位置</th></tr></thead><tbody><tr><td>1</td><td>(100,100)</td><td>(100,100) 归零</td></tr><tr><td>2</td><td>( 98,102)</td><td>( 98,102)</td></tr><tr><td>3</td><td>( 98,100)</td><td>( 96,102)</td></tr><tr><td>4</td><td>(100,102)</td><td>( 96,104)</td></tr><tr><td>5</td><td>(100,100)</td><td>(100,100) 归零</td></tr></tbody></table><p>把两次归零操作之间，每一帧的实际位置都画出来，就能得到一幅图案。最终发现一共有5幅图案，按顺序绘制出来，发现是一个单词“bonus”。</p><ul><li>gif. n_frame返回所有关键帧</li><li>gif.seek()在给定的文件序列中查找指定的帧。如果查找超越了序列的末尾，则产生一个EOFError异常。当文件序列被打开时，PIL库自动指定到第0帧上。</li><li>gif.tell()返回当前帧</li></ul><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageDraw</span><br><span class="line"></span><br><span class="line">gif = Image.<span class="built_in">open</span>(<span class="string">"assets/white.gif"</span>)</span><br><span class="line">new = Image.new(<span class="string">'RGB'</span>, (<span class="number">500</span>, <span class="number">500</span>)) <span class="comment"># 默认背景为黑</span></span><br><span class="line">draw = ImageDraw.Draw(new)</span><br><span class="line">cx, cy = <span class="number">0</span>, <span class="number">100</span> <span class="comment"># 画点的起始位置</span></span><br><span class="line"><span class="keyword">for</span> frame <span class="keyword">in</span> <span class="built_in">range</span>(gif.n_frames):</span><br><span class="line">    gif.seek(frame)</span><br><span class="line">    left, upper, right, lower = gif.getbbox()</span><br><span class="line">    <span class="comment"># 得到与100,100的相对位置</span></span><br><span class="line">    dx = left - <span class="number">100</span></span><br><span class="line">    dy = upper - <span class="number">100</span></span><br><span class="line">    <span class="comment"># 一个图案画完了,移远一点,继续画</span></span><br><span class="line">    <span class="keyword">if</span> dx == dy == <span class="number">0</span>:</span><br><span class="line">        cx += <span class="number">50</span></span><br><span class="line">        cy = <span class="number">100</span></span><br><span class="line">    cx += dx</span><br><span class="line">    cy += dy</span><br><span class="line">    draw.point([cx, cy])</span><br><span class="line">new.show()</span><br></pre></td></tr></tbody></table></figure><h2 id="level-23-2020-12-15">level_23_2020.12.15</h2><blockquote><p>额，之前为了考试周，于是拖了好久，然后就一直捡不起来了哇！剧刷腻了，b站搞笑视频也觉得不好玩了，就又回来写python了<br>希望之后可以一直坚持下去哇！！！！</p></blockquote><p>解题Solution：源代码里的’va gur snpr bs jung?'明显也是解码，title为”what is this module?“，结合后面的”it can’t find it. this is an undocumented module”，猜测为this模块（就是大名鼎鼎的The Zen of Python啦）！<br>方法1：可以尝试用ocr那题（level_1）的代码试试，依次检验26个偏移量能否得到一个有含义的句子</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ocr</span>():</span></span><br><span class="line">    text = <span class="string">'va gur snpr bs jung?'</span></span><br><span class="line">    <span class="keyword">for</span> offset <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">26</span>):</span><br><span class="line">        trans = <span class="built_in">str</span>.maketrans(string.ascii_lowercase,string.ascii_lowercase[offset:] + string.ascii_lowercase[:offset])</span><br><span class="line">        new_text = text.translate(trans)</span><br><span class="line">        print(new_text)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    ocr()</span><br></pre></td></tr></tbody></table></figure><p>发现偏移量为13时，字符可解码为in the face of what?</p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">0 → va gur snpr bs jung?</span><br><span class="line">1 → wb hvs toqs ct kvoh?</span><br><span class="line">2 → xc iwt uprt du lwpi?</span><br><span class="line">3 → yd jxu vqsu ev mxqj?</span><br><span class="line">4 → ze kyv wrtv fw nyrk?</span><br><span class="line">5 → af lzw xsuw gx ozsl?</span><br><span class="line">6 → bg max ytvx hy patm?</span><br><span class="line">7 → ch nby zuwy iz qbun?</span><br><span class="line">8 → di ocz avxz ja rcvo?</span><br><span class="line">9 → ej pda bwya kb sdwp?</span><br><span class="line">10 → fk qeb cxzb lc texq?</span><br><span class="line">11 → gl rfc dyac md ufyr?</span><br><span class="line">12 → hm sgd ezbd ne vgzs?</span><br><span class="line">`13 → in the face of what?`</span><br><span class="line">14 → jo uif gbdf pg xibu?</span><br><span class="line">15 → kp vjg hceg qh yjcv?</span><br><span class="line">16 → lq wkh idfh ri zkdw?</span><br><span class="line">17 → mr xli jegi sj alex?</span><br><span class="line">18 → ns ymj kfhj tk bmfy?</span><br><span class="line">19 → ot znk lgik ul cngz?</span><br><span class="line">20 → pu aol mhjl vm doha?</span><br><span class="line">21 → qv bpm nikm wn epib?</span><br><span class="line">22 → rw cqn ojln xo fqjc?</span><br><span class="line">23 → sx dro pkmo yp grkd?</span><br><span class="line">24 → ty esp qlnp zq hsle?</span><br><span class="line">25 → uz ftq rmoq ar itmf?</span><br></pre></td></tr></tbody></table></figure><p>import this,里面有一句“In the face of ambiguity”，所以答案就是ambiguity，<a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/hex/ambiguity.html">http://www.pythonchallenge.com/pc/hex/ambiguity.html</a></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">The Zen of Python, by Tim Peters</span><br><span class="line"></span><br><span class="line">Beautiful is better than ugly.</span><br><span class="line">Explicit is better than implicit.</span><br><span class="line">Simple is better than complex.</span><br><span class="line">Complex is better than complicated.</span><br><span class="line">Flat is better than nested.</span><br><span class="line">Sparse is better than dense.</span><br><span class="line">Readability counts.</span><br><span class="line">Special cases aren't special enough to break the rules.</span><br><span class="line">Although practicality beats purity.</span><br><span class="line">Errors should never pass silently.</span><br><span class="line">Unless explicitly silenced.</span><br><span class="line">In the face of ambiguity, refuse the temptation to guess.</span><br><span class="line">There should be one-- and preferably only one --obvious way to do it.</span><br><span class="line">Although that way may not be obvious at first unless you're Dutch.</span><br><span class="line">Now is better than never.</span><br><span class="line">Although never is often better than *right* now.</span><br><span class="line">If the implementation is hard to explain, it's a bad idea.</span><br><span class="line">If the implementation is easy to explain, it may be a good idea.</span><br><span class="line">Namespaces are one honking great idea -- let's do more of those!</span><br><span class="line">Gur Mra bs Clguba, ol Gvz Crgref</span><br></pre></td></tr></tbody></table></figure><p>Solution2：<br>如果尝试输入<code>print(this.s)</code>,你会发现得到的是The Zen of python的加密版本，输入<code>print(this.d)</code>,得到的解密本字典,所以推理得到给的那个字符串也是这样加密的<br>方法2:<br>简单粗暴</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">text = <span class="string">'va gur snpr bs jung?'</span></span><br><span class="line">print(<span class="string">""</span>.join([this.d.get(c,c) <span class="keyword">for</span> c <span class="keyword">in</span> text])) <span class="comment">#in the face of what?</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>老实说,隔了这么久,不知道再继续玩python challenge还有没有必要哈,但是我好像确实没什么其他想到能做的事了(咸鱼一只),所以就脚踏实地吧,总要坚持一件事,我也相信前方或许会有意想不到的收获.不知道为什么,进入大三之后,整个人变得浮躁不堪,静不下心去踏实学东西,我觉得这样很糟!</p></blockquote><h2 id="level-24-maze-2020-12-16">level_24_maze_2020.12.16</h2><p><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/maze-2020-12-18.png" alt="maze">]<br>发现Vscode真的适合把图片放大到像素级<br><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201218190652-2020-12-18.png" alt="图片放大"><br><strong>🔑Solution</strong><br>这一关真的好有趣呀，就是得先找到迷宫的entrance和exit，然后就需要使用数据结构的知识来走迷宫啦，我用的是栈深度搜索，队列就是广度搜索了吧，收集走迷宫的路径每个像素位置以及点的R通道值，然后转化为二进制数据，发现开头是PK，提示为压缩包，所以就将数据生成为压缩包，解压即得到下一关提示。<br><strong>🖊Learned</strong></p><ul><li>二进制开头b’PK’为压缩包</li><li><code>ImageDraw.Draw</code>模块</li><li>栈和队列复习</li></ul><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageDraw</span><br><span class="line">maze = Image.<span class="built_in">open</span>(<span class="string">"assets/maze.png"</span>)</span><br><span class="line">directions =[(<span class="number">0</span>,<span class="number">1</span>),(<span class="number">0</span>,<span class="number">-1</span>),(<span class="number">1</span>,<span class="number">0</span>),(<span class="number">-1</span>,<span class="number">0</span>)] <span class="comment"># 方向</span></span><br><span class="line">white = (<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>)</span><br><span class="line">w,h = maze.size</span><br><span class="line"></span><br><span class="line">next_map = {}</span><br><span class="line"><span class="comment"># 通过for i in range(w): print(maze.getpixel((i, 0)))可知入口的黑色像素位置</span></span><br><span class="line">entrance = (w - <span class="number">2</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment"># 通过 for i in range(w): print(maze.getpixel((i, h - 1)))可知出口位置</span></span><br><span class="line">exit = (<span class="number">1</span>, h - <span class="number">1</span>) </span><br><span class="line"><span class="comment"># stack代表的用栈来存储可能的路口</span></span><br><span class="line">stack = [exit]</span><br><span class="line"><span class="keyword">while</span> stack:</span><br><span class="line">    pos = stack.pop() <span class="comment"># 当前位置</span></span><br><span class="line">    <span class="keyword">if</span> pos == entrance:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> directions:</span><br><span class="line">        tmp = (pos[<span class="number">0</span>] + d[<span class="number">0</span>], pos[<span class="number">1</span>] + d[<span class="number">1</span>]) <span class="comment">#tmp代表的是可能的下一个位置</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> tmp <span class="keyword">in</span> next_map <span class="keyword">and</span> <span class="number">0</span> &lt;= tmp[<span class="number">0</span>] &lt; w <span class="keyword">and</span> <span class="number">0</span> &lt;= tmp[<span class="number">1</span>] &lt; h <span class="keyword">and</span> maze.getpixel(tmp) != white:</span><br><span class="line">            next_map[tmp] = pos  <span class="comment"># next_map放的是下一个位置←该位置的字典，但该程序会记录错误的路线而不会删除，虽然不影响回溯</span></span><br><span class="line">            stack.append(tmp) <span class="comment"># 会把所有可能的路口都入栈</span></span><br><span class="line"></span><br><span class="line">path = []</span><br><span class="line">top_img = Image.new(<span class="string">'RGBA'</span>, (<span class="number">641</span>, <span class="number">641</span>), (<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>))</span><br><span class="line">draw = ImageDraw.Draw(top_img)</span><br><span class="line"><span class="keyword">while</span> pos != exit: <span class="comment"># pos 将从起点开始回溯</span></span><br><span class="line">    path.append(maze.getpixel(pos)[<span class="number">0</span>]) <span class="comment"># 只输出第一个RGB值</span></span><br><span class="line">    draw.point(pos,maze.getpixel(pos))</span><br><span class="line">    pos = next_map[pos]</span><br><span class="line"></span><br><span class="line">top_img.show()</span><br><span class="line">top_img.save(<span class="string">'output/level_24_path.png'</span>)</span><br><span class="line"><span class="comment"># print(path)</span></span><br><span class="line"><span class="comment"># print(path[1::2])</span></span><br><span class="line"><span class="comment"># print(bytes(path[1::2]))</span></span><br><span class="line"><span class="comment"># open('output/level_24_maze.zip','wb').write(bytes(path))</span></span><br><span class="line"><span class="built_in">open</span>(<span class="string">'output/level_24_maze.zip'</span>,<span class="string">'wb'</span>).write(<span class="built_in">bytes</span>(path[<span class="number">1</span>::<span class="number">2</span>])) <span class="comment"># path[1::2]的原因只是因为R通道即红点都是至少都是间隔分布的</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/level_24_path-2020-12-18.png" alt="level_24_path"><br><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201218190741-2020-12-18.png" alt="放大图片"></p><h2 id="level-25-wave拼图-2020-12-17">level_25_wave拼图_2020.12.17</h2><p>Link: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/hex/lake.html">http://www.pythonchallenge.com/pc/hex/lake.html</a><br><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201218184825-2020-12-18.png" alt="关卡图"></p><p><strong>Solution：</strong><br>看到图片名是“lake1.jpg”，根据提示尝试获取“lake1.wav”，文件存在，猜测应该还有“lake2.wav”，“lake3.wav”，……于是构造一个网络爬虫<br>以音频方式打开文件，发现都是杂音，根据图片中拼图的提示，将每个音频转化一共图片，25个正好对应了关卡图中5*5拼图，然后把25个图片拼在一起，就得到结果啦<br><strong>Learned：</strong></p><ul><li>python创建文件不会自动创建文件夹吗<ul><li>是的，如果路径不存在，必须手动先创建，可以使用os.makedirs(path) <a target="_blank" rel="noopener" href="https://blog.csdn.net/Homewm/article/details/80766894">https://blog.csdn.net/Homewm/article/details/80766894</a></li></ul></li><li>HTTPPasswordMgrWithDefaultRealm()类将创建一个密码管理对象，用来保存 HTTP 请求相关的用户名和密码，主要应用两个场景：<ul><li>验证代理授权的用户名和密码 (ProxyBasicAuthHandler())</li><li>验证Web客户端的的用户名和密码 (HTTPBasicAuthHandler())</li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weicao1990/article/details/80066655">https://blog.csdn.net/weicao1990/article/details/80066655</a></li></ul></li><li><code>Image.frombytes</code>从二进制中创建，im.paste()粘贴图片上去<br><strong>💻Code</strong></li></ul><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request, error</span><br><span class="line"><span class="keyword">import</span> wave</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">print(<span class="string">f"\033[31mLevel 25\033[0m"</span>)  <span class="comment"># 原来可以打印红色字欸</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mkdir</span>(<span class="params">path</span>):</span></span><br><span class="line">    <span class="comment"># 创建文件夹函数</span></span><br><span class="line">    folder = os.path.exists(path)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> folder:</span><br><span class="line">        os.makedirs(path)</span><br><span class="line">        print(<span class="string">f"---new folder <span class="subst">{path}</span>---"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 爬虫部分</span></span><br><span class="line"><span class="comment"># 1. 构建一个密码管理对象，用来保存需要处理的用户名和密码</span></span><br><span class="line">password_mgr = request.HTTPPasswordMgrWithDefaultRealm()</span><br><span class="line"><span class="comment"># 2. 添加账户信息，第一个参数realm是与远程服务器相关的域信息，一般没人管它都是写None，后面三个参数分别是 代理服务器、用户名、密码</span></span><br><span class="line">password_mgr.add_password(</span><br><span class="line">    <span class="literal">None</span>, <span class="string">"http://www.pythonchallenge.com/"</span>, <span class="string">"butter"</span>, <span class="string">"fly"</span>)</span><br><span class="line"><span class="comment"># 3. 构建一个HTTP基础用户名/密码验证的HTTPBasicAuthHandler处理器对象，参数是创建的密码管理对象</span></span><br><span class="line">handler = request.HTTPBasicAuthHandler(password_mgr) <span class="comment"># passowrd_mgr→handler，HTTPBasicAuthHandler基本的HTTP验证处理</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 通过 build_opener()方法使用这些代理Handler对象，创建自定义opener对象，</span></span><br><span class="line">opener = request.build_opener(handler) <span class="comment"># handler→opener</span></span><br><span class="line">mkdir(<span class="string">"output/level_25"</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">26</span>):</span><br><span class="line">    print(<span class="string">f"Processing <span class="subst">{i:<span class="number">2</span>d}</span>..."</span>, end=<span class="string">'\t'</span>)</span><br><span class="line">    url = <span class="string">f"http://www.pythonchallenge.com/pc/hex/lake<span class="subst">{i}</span>.wav"</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = opener.<span class="built_in">open</span>(url)</span><br><span class="line">    <span class="keyword">except</span> error.HTTPError:</span><br><span class="line">        print(<span class="string">"HTTP ERROR 404"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">f"output/level_25/lake<span class="subst">{i}</span>.wav"</span>, <span class="string">"wb"</span>) <span class="keyword">as</span> file: <span class="comment"># 'wb'写入二进制文件</span></span><br><span class="line">            data = response.read()</span><br><span class="line">            file.write(data)</span><br><span class="line">            print(<span class="string">"Successfully Saved."</span>)</span><br><span class="line">    <span class="comment"># 一共25个wav文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建图片 →把25个wav转成5*5的拼图块→合并图片</span></span><br><span class="line">im = Image.new(<span class="string">"RGB"</span>, (<span class="number">300</span>, <span class="number">300</span>)) </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">26</span>):</span><br><span class="line">    <span class="comment"># wave.open()返回Wave_write对象</span></span><br><span class="line">    <span class="keyword">with</span> wave.<span class="built_in">open</span>(<span class="string">f"output/level_25/lake<span class="subst">{i}</span>.wav"</span>, <span class="string">"rb"</span>) <span class="keyword">as</span> file:</span><br><span class="line">        <span class="comment"># getnframes()返回音频帧数</span></span><br><span class="line">        <span class="comment"># readframes(n)最多读取并返回n帧音频，作为字节对象。</span></span><br><span class="line">        <span class="comment"># file.readframes(file.getnframes())就是先读取一共几帧，然后把所有帧都输出成二进制</span></span><br><span class="line">        data = file.readframes(file.getnframes())</span><br><span class="line">        block_im = Image.frombytes(<span class="string">"RGB"</span>, (<span class="number">60</span>, <span class="number">60</span>), data)</span><br><span class="line">        x, y = (i - <span class="number">1</span>) % <span class="number">5</span> * <span class="number">60</span>, (i - <span class="number">1</span>) // <span class="number">5</span> * <span class="number">60</span> <span class="comment"># 超过5个就换下一行</span></span><br><span class="line">        im.paste(block_im, (x, y))</span><br><span class="line">im.save(<span class="string">"output/level_25/result.jpg"</span>)</span><br></pre></td></tr></tbody></table></figure><h2 id="level-26-md5-2020-12-18">level_26_md5_2020.12.18</h2><p>Link: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/hex/decent.html">http://www.pythonchallenge.com/pc/hex/decent.html</a></p><p><strong>Solution：</strong><br>源码说已经得到邮箱了（我咋不知道），原来早在第19关网页的源代码就给了个邮箱，leopold.moz@pythonchallenge.com，然后发送，标题为Apologize，内容为Sorry的邮件，你就可以得到以下回复:</p><blockquote><p>Never mind that.</p><p>Have you found my broken zip?</p><p>md5: bbb8b499a0eef99b52c7f13f4e78c24b</p><p>Can you believe what one mistake can lead to?</p></blockquote><p>意思就是说之前我们maze那关得到的压缩包不是除了图片还有一共压缩包吗？如果解压的话就会提示校验值错误，这个回复就是说压缩包的二进制数据有一个错误，要让咱一个个尝试，把它改对，用md5来校验文件是否修复好。（然而之前我用bzip不修复照样也解压出来了……有点尴尬,ԾㅂԾ,）<br>最后得到的图片显示"speed",然后再结合Hurry up, I’m missing the boat,下一关网址就是"speedboat"</p><p><strong>Learned：</strong></p><ul><li>原来python终端可以打印出颜色呀，Learned了<ul><li>Python基础之控制台输出颜色 <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_33567641/article/details/82769523">https://blog.csdn.net/qq_33567641/article/details/82769523</a></li></ul></li><li>切片是左闭右开，我又忘了</li><li>对二进制的操作还是似懂非懂哇，有空专门学习下！</li></ul><p><strong>Code：</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">repair</span>(<span class="params">data</span>):</span></span><br><span class="line">    <span class="keyword">for</span> pos <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)):</span><br><span class="line">        <span class="keyword">if</span> pos == <span class="number">4</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        print(<span class="string">f"Trying repairing the position <span class="subst">{pos}</span> ..."</span>)</span><br><span class="line">        print(data[:pos])</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>): <span class="comment"># try 0-255</span></span><br><span class="line">            newData = data[:pos] + <span class="built_in">bytes</span>([j]) + data[pos+<span class="number">1</span>:] <span class="comment"># 替换pos那个位置的值</span></span><br><span class="line">            <span class="keyword">if</span> hashlib.md5(newData).hexdigest() == md5code:</span><br><span class="line">                <span class="built_in">open</span>(<span class="string">'output/level_26_repaired.zip'</span>,<span class="string">'wb'</span>).write(newData)</span><br><span class="line">                print(<span class="string">f"\033[1;31m Zip have been repaired！\033[0m"</span>)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">md5code = <span class="string">"bbb8b499a0eef99b52c7f13f4e78c24b"</span></span><br><span class="line">data = <span class="built_in">open</span>(<span class="string">'assets/mybroken.zip'</span>,<span class="string">'rb'</span>).read()</span><br><span class="line">repair(data)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="level-27-between-the-tables-2020-12-19">level_27_between the tables_2020.12.19</h2><p>Link: <a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/hex/speedboat.html">http://www.pythonchallenge.com/pc/hex/speedboat.html</a></p><p><strong>🔑Solution</strong><br>点击图片就能直接进入下一关，然而不知账号密码。<br>这一关涉及到图像色板、映射、常见但依旧不了解的二进制数据处理还有keyword模块<br>也没啥Solution了，毕竟是copy别人的代码嘛！</p><p><strong>🖊Learned</strong></p><ul><li>im.getpalette()以列表形式返回图像调色板，putpalette给对象加上调色板，相当于上色,然而暂时不懂调色板是什么东东</li><li>im.tobytes()，把图片转化为二进制</li><li><code>maketrans(A,B)</code>和<code>newData = data.translate()</code>明明很早接触了，然而还是不熟悉</li><li>filter和lambda的用法<code>diff = list(filter(lambda p: p[0] != p[1], zipped))</code></li><li>index的复数形式是indices（滑稽）</li></ul><p><strong>💻Code</strong></p><p>建立二进制索引和色板, 映射到图片字节流数据<br>什么，你问我为什么要这样做？不知道……，毕竟这一关的标题就是between the tables，毕竟别人是这样解题的。</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> keyword</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> bz2</span><br><span class="line"></span><br><span class="line">im = Image.<span class="built_in">open</span>(<span class="string">'assets/zigzag.gif'</span>)</span><br><span class="line"><span class="comment"># im.getpalette()以列表形式返回图像调色板，getpalette（）获取图片对应的调色板；putpalette给对象加上调色板，相当于上色</span></span><br><span class="line"><span class="comment"># [37, 229, 162, 136, 59, 212, 9, 41, 24, 156, 148, 112, 254, 91,..]</span></span><br><span class="line">palette = im.getpalette()[::<span class="number">3</span>]</span><br><span class="line"><span class="comment"># print(palette)</span></span><br><span class="line"><span class="built_in">len</span>(palette) <span class="comment">#256</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立二进制索引和色板, 映射到图片字节流数据</span></span><br><span class="line">table = <span class="built_in">bytes</span>.maketrans(<span class="built_in">bytes</span>([i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>)]),<span class="built_in">bytes</span>(palette))</span><br><span class="line">raw = im.tobytes()</span><br><span class="line">trans = raw.translate(table)</span><br></pre></td></tr></tbody></table></figure><p>比较raw和trans数据，发现除去raw的第一个和tran的最后一个，大致数据差不多</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">print(raw)</span><br><span class="line"><span class="built_in">print</span>（trans)</span><br></pre></td></tr></tbody></table></figure><p>所以下一步就是把不一样的数据过滤出来</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">zipped = <span class="built_in">list</span>(<span class="built_in">zip</span>(raw[<span class="number">1</span>:],trans[:<span class="number">-1</span>]))</span><br><span class="line">diff = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> p: p[<span class="number">0</span>]!=p[<span class="number">1</span>], zipped)) <span class="comment"># 这里用来匿名函数+filter过滤</span></span><br><span class="line">indices = [i <span class="keyword">for</span> i, p <span class="keyword">in</span> <span class="built_in">enumerate</span>(zipped) <span class="keyword">if</span> p[<span class="number">0</span>] != p[<span class="number">1</span>]] <span class="comment"># indices是index的复数形式</span></span><br></pre></td></tr></tbody></table></figure><p>处理diff数据，转化为text</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">s=[t[<span class="number">0</span>] <span class="keyword">for</span> t <span class="keyword">in</span> diff] <span class="comment"># t[1]即trans的数据则没有提示</span></span><br><span class="line">print(<span class="built_in">bytes</span>(s)) <span class="comment"># 熟悉的bz开头</span></span><br><span class="line">text = bz2.decompress(<span class="built_in">bytes</span>(s)) <span class="comment">#解码成文本</span></span><br><span class="line">print(text) <span class="comment">#发现是有一堆python关键字</span></span><br></pre></td></tr></tbody></table></figure><p>新建一个白底的图像，利用之前数据不一样的索引，把该位置都改为黑色</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">im2 = Image.new(<span class="string">'RGB'</span>, im.size)</span><br><span class="line">colors = [(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)]*<span class="built_in">len</span>(raw)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> indices:</span><br><span class="line">    colors[i] = (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">im2.putdata(colors)</span><br></pre></td></tr></tbody></table></figure><p>竟然能得到一张图，提示not keyword，就是说我们要把text里不是keyword的词给提取出来<br><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201219151302-2020-12-19.png" alt="not keyword的提示"></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> keyword</span><br><span class="line">print(<span class="built_in">set</span>([w <span class="keyword">for</span> w <span class="keyword">in</span> text.split() <span class="keyword">if</span> <span class="keyword">not</span> keyword.iskeyword(w.decode())]))</span><br></pre></td></tr></tbody></table></figure><p>最终得到</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">{<span class="string">b'print'</span>, <span class="string">b'../ring/bell.html'</span>, <span class="string">b'repeat'</span>, <span class="string">b'exec'</span>, <span class="string">b'switch'</span>}</span><br></pre></td></tr></tbody></table></figure><p>值得注意的是，“print”和“exec”在Python2中式关键字，在Python3中变成了函数，所以没有被去掉。<br>经过尝试，bell.html网页的用户名为repeat，密码为switch。<br>Over！</p><h2 id="level-28-many-pairs-ring-ring-2020-12-20">level_28_many pairs ring-ring_2020.12.20</h2><p><strong>🔑Solution</strong><br>本关考察对图片和字节流的处理能力。提示让我们大声说“RING-RING-RING”，是指“RING”谐音“GREEN”，就是指RGB的绿色通道。我们需要将绿色通道的数据两两配对，每组作差取绝对值，例如 green = [55, 97, 73, 115, 120, 78, ……]，操作后的结果是 diff = [42, 42, 42, ……]。查看列表diff的值，发现几乎都是“42”，去掉数值“42”，剩下的数值转成字符构成一条语句：<br>whodunnit().split()[0] ?<br>whodunnit直译是侦探小说,但明显不是这个意思,结合本关的谐音,可以知道是who done it的谐音,再结合<code>.split()[0]</code> 可以知道是问python之父是谁<br>当然是那个死胖子,Guido啦,哈哈哈哈<br><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201220133143-2020-12-20.png" alt="Guido van Rossum"></p><p><strong>🖊Learned</strong></p><ul><li><code>list(im.split()[1].getdata())</code> 获得green像素值列表</li><li><code>abs(a-b)for a, b in zip(green[0::2], green[1::2])</code> 列表的前一个减后一个</li><li>filter+lambda 过滤列表<br><strong>💻Code</strong></li></ul><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line">im = Image.<span class="built_in">open</span>(<span class="string">'assets/bell.png'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ring-ring的谐音是green,所以提取green值</span></span><br><span class="line">green = <span class="built_in">list</span>(im.split()[<span class="number">1</span>].getdata())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发现green前一个和后一个几乎都是差42,有猫腻</span></span><br><span class="line">diff = [<span class="built_in">abs</span>(a-b)<span class="keyword">for</span> a, b <span class="keyword">in</span> <span class="built_in">zip</span>(green[<span class="number">0</span>::<span class="number">2</span>], green[<span class="number">1</span>::<span class="number">2</span>])]</span><br><span class="line"><span class="comment"># print(diff)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把42过滤掉</span></span><br><span class="line">filtered = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x != <span class="number">42</span>, diff))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 过滤后的数据转化为二进制并解码</span></span><br><span class="line">print(<span class="built_in">bytes</span>(filtered).decode())  <span class="comment"># whodunnit().split()[0] ?</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="level-29-silence-2020-12-21">level_29_silence_2020.12.21</h2><p><strong>🔑Solution</strong><br>一开始看源代码我是懵逼的，看了答案才知道html原来后面的行有玄机！一旦把每行的长度整理成数字列表之后，然后转化为二进制，发现又是BZ开头，用bz2解压，得到下一关的hint<br><img src="https://pic4.zhtop_img.com/80/v2-f44b0a3b683e58e8e9dffaba4d2da6bf.png" alt="你以为空无一物"><br><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201221181345-2020-12-21.png" alt="程序员的浪漫"><br><strong>🖊Learned</strong></p><ul><li>这一关真的好秒呀，论程序员的浪漫，可以用这关来装逼，隐藏想说的话！</li><li>网页Authorization这个始终记不住……</li><li>splitlines()直接切割行，把内容转化为列表</li><li>列表转bytes，直接bytes(list),bytes转列表 list（bytes）</li></ul><p><strong>💻Code</strong><br>解题</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> Request, urlopen</span><br><span class="line"><span class="keyword">import</span> bz2</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">req = Request(<span class="string">'http://www.pythonchallenge.com/pc/ring/guido.html'</span>)</span><br><span class="line">req.add_header(<span class="string">'Authorization'</span>,</span><br><span class="line">               <span class="string">'Basic %s'</span> % base64.b64encode(<span class="string">b'repeat:switch'</span>).decode())</span><br><span class="line"><span class="comment"># 读取html13行之后的数据</span></span><br><span class="line">raw = urlopen(req).read().splitlines()[<span class="number">12</span>:]</span><br><span class="line"><span class="comment"># 数13行之后每行的长度，并转化为二进制</span></span><br><span class="line">data = <span class="built_in">bytes</span>([<span class="built_in">len</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> raw])</span><br><span class="line"><span class="comment"># 解压二进制</span></span><br><span class="line">print(bz2.decompress(data))</span><br></pre></td></tr></tbody></table></figure><p>我们也从作者的角度来反推这个谜题是怎么做出来的<br>加密我们想说的话</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> bz2</span><br><span class="line"></span><br><span class="line">message = <span class="string">b""</span> <span class="comment"># 这得二进制</span></span><br><span class="line">compressed = bz2.compress(message)</span><br><span class="line">num_list = <span class="built_in">list</span>(compressed)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">"level_29_silence.txt"</span>, <span class="string">'w'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> num_list:</span><br><span class="line">        file.write(<span class="string">' '</span> * num + <span class="string">'\n'</span>)</span><br></pre></td></tr></tbody></table></figure><p>解密,<br>哈哈，毕竟圣诞节到了嘛，不过这个silent.txt发给女生估计会被打！</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">"level_29_silence.txt"</span>, <span class="string">'r'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    raw = file.read().splitlines()</span><br><span class="line">    <span class="comment"># print(raw)</span></span><br><span class="line"><span class="comment"># 数13行之后每行的长度，并转化为二进制</span></span><br><span class="line">data = <span class="built_in">bytes</span>([<span class="built_in">len</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> raw])</span><br><span class="line"><span class="comment"># 解压二进制</span></span><br><span class="line">print(bz2.decompress(data)) <span class="comment"># Merry Christmas</span></span><br></pre></td></tr></tbody></table></figure><h2 id="level-30-图片翻转质数之积-2020-12-22">level_30_图片翻转质数之积_2020.12.22</h2><p><strong>🔑Solution</strong><br>根据提示，下载“yankeedoodle.csv”，里面是一堆浮点数<br>还以为原来的行列可能有玄机，谁知道是直接数多少个数，然后发现可以拆分为两个质数的积，7367 = 53*139， 构造一个53*139的图片，得到一个带公式的图片<code>n = str(x[i])[5] + str(x[i+1])[5] + str(x[i+2])[6]</code>，就按照这个公式来处理csv得到的数据，最终得到“look at grandpa”的提示，剩下的信息别想太多，确实没用</p><p><strong>🖊Learned</strong></p><ul><li>图片左右翻转 <code>top_img.transpose(Image.FLIP_LEFT_RIGHT)</code></li><li>图片旋转 <code>top_img.transpose(Image.ROTATE_90)</code></li><li>大概懂了<code>top_img.putdata</code>的意思</li><li>感觉学来学去，一直都在学图像处理呀！！！哈哈哈哈哈哈</li><li>不知道为什么VSCode现在写markdown卡的要死……一回车就卡死</li></ul><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">'assets/yankeedoodle.csv'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="comment"># 处理成列表</span></span><br><span class="line">    data = [x.strip() <span class="keyword">for</span> x <span class="keyword">in</span> f.read().split(<span class="string">","</span>)]</span><br><span class="line">    <span class="comment"># 计算列表长度</span></span><br><span class="line">    length = <span class="built_in">len</span>(data)</span><br><span class="line">    print(length)  <span class="comment"># 7367</span></span><br><span class="line"></span><br><span class="line">factor = [x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, length) <span class="keyword">if</span> length % x == <span class="number">0</span>]</span><br><span class="line">print(factor)  <span class="comment"># 计算这个length的因子为53*139</span></span><br><span class="line"></span><br><span class="line">top_img = Image.new(<span class="string">"F"</span>, (<span class="number">53</span>, <span class="number">139</span>))</span><br><span class="line">top_img.putdata([<span class="built_in">float</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> data], <span class="number">256</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 左右翻转</span></span><br><span class="line">top_img = top_img.transpose(Image.FLIP_LEFT_RIGHT)</span><br><span class="line"><span class="comment"># 顺时针旋转90度</span></span><br><span class="line">top_img = top_img.transpose(Image.ROTATE_90)</span><br><span class="line">top_img.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据图片给的hint</span></span><br><span class="line">a = data[<span class="number">0</span>::<span class="number">3</span>]</span><br><span class="line">b = data[<span class="number">1</span>::<span class="number">3</span>]</span><br><span class="line">c = data[<span class="number">2</span>::<span class="number">3</span>]</span><br><span class="line">res = <span class="built_in">bytes</span>([<span class="built_in">int</span>(x1[<span class="number">5</span>] + x2[<span class="number">5</span>] + x3[<span class="number">6</span>]) <span class="keyword">for</span> x1, x2, x3 <span class="keyword">in</span> <span class="built_in">zip</span>(a, b, c)])</span><br><span class="line"></span><br><span class="line">print(res)</span><br></pre></td></tr></tbody></table></figure><p>得到的图片<br><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201222110626-2020-12-22.png" alt="formula"><br>最终输出结果</p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">b'So, you found the hidden message.\nThere is lots of room here for a long message, but we only need very little space to say "look at grandpa", so the rest is just garbage. \nVTZ.l\'\x7ftf*Om@I"p]</span><br></pre></td></tr></tbody></table></figure><h2 id="level-31-Mandelbrot-set-2020-12-23">level_31_Mandelbrot set_2020.12.23</h2><p><strong>🔑Solution</strong><br>点击图片进入下一关,需要用户名和密码,用户名是“kohsamui”，密码是“thailand”，进入第二部分。<br>第二部分的图片名词为mandelbrot,而图片的雪花本身就是曼德博集合.</p><p>注意到网页源代码的window和option标签，我们需要构造一个复平面，宽度对应x轴，高度对应y轴，范围由window标签给出。<br>left=“0.34” top=“0.57” width=“0.036” height=“0.027”<br>w = 640px —— x轴 范围 [left, left+width] = [0.34, 0.376]<br>h = 480px —— y轴 范围 [top, top+height] = [0.57, 0.597]</p><p>对于每个像素点,根据比例计算其在复平面的坐标(x,y) ,记复数c=x+yi,从z0=0开始迭代,迭代公式为zi+1=zi**2+c,c=x+yi,<br>记Mandelbrot集为M,根据定理,若复数c ∈ M ，则|zi| &lt; 2, ∀ i ∈ N<br>迭代次数由option标签给出，最多128次，若迭代完128次，其模仍小于2，则该点的颜色值为127，若|zi|&lt;2 and|zi+1|&gt;=2, 则该点颜色为i，对应图片的palette表<br>然后将得到的list绘制图片比较两张图的像素差异,把不同的像素点提取出来,最后转化成黑白的图片,图片为阿雷西博信息,所以答案为“arecibo ”</p><p><strong>🖊Learned</strong></p><ul><li>复习图像模式,P-8bit-使用调色板映射到其他任何模式,L-8bit-黑白…对,我又忘记了(,ԾㅂԾ,)</li><li>感觉对getpalette(),putpalete()的理解加深了,返回的列表其实是[r, g, b, r, g, b…],三个一个RGB排列下去,P模式，才具有调色板属性,RGB模式getpixel((x,y))是RGB值,而P模式getpixel((x,y))是一个值,即索引,大小范围在0~255之间<br>调色板就是来减少存储空间使用量的,它存储着256种不同的调色方案<br>以下代码将会打印出图像top_img的调色板情况，按照256个配色方案*3个通道值的格式排列：<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">print(np.array(top_img.getpalette()).reshape(<span class="number">256</span>,<span class="number">3</span>))</span><br></pre></td></tr></tbody></table></figure>使用了调色盘的图像将会被单通道存储，每个像素位置的值是调色盘“表”中的索引，这在存储图像的时候空间要求从RGB的<strong>3</strong>个字节变成了<strong>1</strong>个字节。达到减小空间的目的.<br>但是,因为表中有限的配色方案数量（256），能使用的颜色也是有限制的，这也是P格式图像的一个缺点。<br><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/334057386/answer/774192372">python中的pil库中的p模式是干什么用的？</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40005329/article/details/103481553">Python PIL 图像处理中模式为"P"的含义以及与"RGB"之间的转换</a></li><li>图像的原点是在左上角吧,X轴是从左到右增长的，而Y轴是从上到下增长,所以例如本题构造result图片时因为提前确定好高度和宽度,1679个值从上放到下</li><li><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%9B%BC%E5%BE%B7%E5%8D%9A%E9%9B%86%E5%90%88">曼德勃罗集（Mandelbrot Set）</a>,<a target="_blank" rel="noopener" href="https://www.dogedoge.com/results?q=python+mandelbrot&amp;lang=auto">Python绘制Mandelbrot</a></li><li>原来python中for也有else呀,<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/37076998">如何在Python中使用break跳出多层循环？</a></li><li>这一关阿雷西博信息要哭死我啊，正好前几天才了解了下，然而2020年12月1日阿雷西博射电望远镜塌了~/(ㄒoㄒ)/~~ <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E9%98%BF%E9%9B%B7%E8%A5%BF%E5%8D%9A%E4%BF%A1%E6%81%AF">阿雷西博信息</a></li></ul><p><strong>💻Code</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mkdir</span>(<span class="params">path</span>):</span></span><br><span class="line">    <span class="comment"># 创建文件夹函数</span></span><br><span class="line">    folder = os.path.exists(path)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> folder:</span><br><span class="line">        os.makedirs(path)</span><br><span class="line">        print(<span class="string">f"---new folder <span class="subst">{path}</span>---"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mkdir(<span class="string">"output/level_31"</span>)</span><br><span class="line">im0 = Image.<span class="built_in">open</span>(<span class="string">'assets/mandelbrot.gif'</span>)</span><br><span class="line">w, h = im0.size  <span class="comment"># 640, 480</span></span><br><span class="line">im1 = Image.new(<span class="string">'P'</span>, (w, h))</span><br><span class="line">im1.putpalette(im0.getpalette())</span><br><span class="line"></span><br><span class="line">left, top, width, height = <span class="number">0.34</span>, <span class="number">0.57</span>, <span class="number">0.036</span>, <span class="number">0.027</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 曼德勃罗集（Mandelbrot Set）</span></span><br><span class="line"><span class="comment"># ! 构造复平面</span></span><br><span class="line"><span class="comment"># left=“0.34” top=“0.57” width=“0.036” height=“0.027”</span></span><br><span class="line"><span class="comment"># w = 640px —— x轴 范围 [left, left+width] = [0.34, 0.376]</span></span><br><span class="line"><span class="comment"># h = 480px —— y轴 范围 [top, top+height] = [0.57, 0.597]</span></span><br><span class="line"><span class="comment"># 复平面坐标(x,y)</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(w):</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(h):</span><br><span class="line">        <span class="comment"># 从左上角开始遍历</span></span><br><span class="line">        z = <span class="built_in">complex</span>(<span class="number">0</span>, <span class="number">0</span>)  <span class="comment"># z0 = 0</span></span><br><span class="line">        <span class="comment"># c = x + yi</span></span><br><span class="line">        c = <span class="built_in">complex</span>(left + x * width / <span class="number">640</span>, top + (h<span class="number">-1</span>-y) * height / <span class="number">480</span>)</span><br><span class="line">        <span class="comment"># 进行迭代 ,迭代次数 &lt;option iterations="128"/&gt;</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">128</span>):</span><br><span class="line">            z = z**<span class="number">2</span> + c  <span class="comment"># zi = zi-1**2 + c</span></span><br><span class="line">            <span class="comment"># 若复数c ∈ M  ，则|zi| &lt; 2, ∀ i ∈ N </span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">abs</span>(z) &gt; <span class="number">2</span>:</span><br><span class="line">                im1.putpixel((x, y), i - <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="comment"># 128次迭代完, 其模仍小于2，则该点的颜色值为127</span></span><br><span class="line">        <span class="keyword">else</span>:  </span><br><span class="line">            <span class="comment"># ! 不只是if有，while和for都有else分支:循环体的else分支触发条件是循环正常结束。如果循环内被break跳出，就不执行else。</span></span><br><span class="line">            im1.putpixel((x, y), <span class="number">127</span>)</span><br><span class="line">im1.save(<span class="string">"output/level_31/mandelbrot_2.gif"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 比较两张图的差别,得到diff列表</span></span><br><span class="line">data0 = <span class="built_in">list</span>(im0.getdata())</span><br><span class="line">data1 = <span class="built_in">list</span>(im1.getdata())</span><br><span class="line"><span class="comment"># 如果p0&lt;p1,则取0即黑色,如果p0&gt;p1,则取255,即白色</span></span><br><span class="line">diff = [<span class="number">255</span> * (p0 &lt; p1) <span class="keyword">for</span> p0, p1 <span class="keyword">in</span> <span class="built_in">zip</span>(data0, data1) <span class="keyword">if</span> p0 != p1]</span><br><span class="line"><span class="built_in">len</span> = <span class="built_in">len</span>(diff)</span><br><span class="line">print(diff)</span><br><span class="line">print(<span class="string">f"length: <span class="subst">{<span class="built_in">len</span>}</span>"</span>)  <span class="comment"># 1679</span></span><br><span class="line">factors = [f <span class="keyword">for</span> f <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="built_in">len</span>) <span class="keyword">if</span> <span class="built_in">len</span> % f == <span class="number">0</span>]</span><br><span class="line">print(factors)  <span class="comment"># [23,73]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">im2 = Image.new(<span class="string">"L"</span>, (<span class="number">23</span>, <span class="number">73</span>))</span><br><span class="line">im2.putdata(diff)</span><br><span class="line">im2.resize((<span class="number">230</span>, <span class="number">730</span>)).show()</span><br><span class="line">im2.save(<span class="string">"output/level_31/result.jpg"</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/mandelbrot_2-2020-12-23.gif" alt="mandelbrot"><br><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/result-2020-12-23.jpg" alt="Arecibo message"></p><h2 id="level-32-刻印-2020-12-24">level_32_刻印_2020.12.24</h2><p><strong>🔑Solution</strong><br>啊，没有Solution，完全不知道这是啥，等以后补吧<br>学习<br>见识到复杂的代码，觉得自己毫无长进吧<br><strong>🖊Learned</strong><br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Nonogram">Nonogram</a>,一种类似于数独的游戏，每一行每一列的数字来填格子，行列都符合的图案就是要求的答案</p><p><strong>代码</strong></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line">is_solved = <span class="literal">False</span></span><br><span class="line">ans_points = np.zeros(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># n = 9</span></span><br><span class="line"><span class="comment"># horizontal = [[2, 1, 2], [1, 3, 1], [5], [7], [9], [3], [2, 3, 2], [2, 3, 2],[2, 3, 2]]</span></span><br><span class="line"><span class="comment"># vertical = [[2, 1, 3], [1, 2, 3], [3], [8], [9], [8], [3], [1, 2, 3],[2, 1, 3]]</span></span><br><span class="line"></span><br><span class="line">n = <span class="number">32</span></span><br><span class="line">horizontal = [[<span class="number">3</span>, <span class="number">2</span>], [<span class="number">8</span>], [<span class="number">10</span>], [<span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">                [<span class="number">5</span>, <span class="number">2</span>, <span class="number">1</span>], [<span class="number">5</span>, <span class="number">2</span>, <span class="number">1</span>], [<span class="number">4</span>, <span class="number">1</span>, <span class="number">1</span>], [<span class="number">15</span>],</span><br><span class="line">                [<span class="number">19</span>], [<span class="number">6</span>, <span class="number">14</span>], [<span class="number">6</span>, <span class="number">1</span>, <span class="number">12</span>], [<span class="number">6</span>, <span class="number">1</span>, <span class="number">10</span>],</span><br><span class="line">                [<span class="number">7</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">8</span>], [<span class="number">6</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], [<span class="number">5</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">1</span>], [<span class="number">5</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">                [<span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">8</span>], [<span class="number">5</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">8</span>], [<span class="number">6</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>], [<span class="number">6</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>],</span><br><span class="line">                [<span class="number">6</span>, <span class="number">1</span>, <span class="number">5</span>], [<span class="number">1</span>, <span class="number">6</span>, <span class="number">3</span>], [<span class="number">2</span>, <span class="number">7</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">3</span>, <span class="number">10</span>, <span class="number">4</span>],</span><br><span class="line">                [<span class="number">9</span>, <span class="number">12</span>, <span class="number">1</span>], [<span class="number">22</span>, <span class="number">1</span>], [<span class="number">21</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">17</span>, <span class="number">1</span>],</span><br><span class="line">                [<span class="number">2</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>], [<span class="number">5</span>]]</span><br><span class="line">vertical = [[<span class="number">5</span>], [<span class="number">5</span>], [<span class="number">5</span>], [<span class="number">3</span>, <span class="number">1</span>],</span><br><span class="line">            [<span class="number">3</span>, <span class="number">1</span>], [<span class="number">5</span>], [<span class="number">5</span>], [<span class="number">6</span>],</span><br><span class="line">            [<span class="number">5</span>, <span class="number">6</span>], [<span class="number">9</span>, <span class="number">5</span>], [<span class="number">11</span>, <span class="number">5</span>, <span class="number">1</span>], [<span class="number">13</span>, <span class="number">6</span>, <span class="number">1</span>],</span><br><span class="line">            [<span class="number">14</span>, <span class="number">6</span>, <span class="number">1</span>], [<span class="number">7</span>, <span class="number">12</span>, <span class="number">1</span>], [<span class="number">6</span>, <span class="number">1</span>, <span class="number">11</span>, <span class="number">1</span>], [<span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">1</span>],</span><br><span class="line">            [<span class="number">3</span>, <span class="number">4</span>, <span class="number">10</span>], [<span class="number">8</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">1</span>], [<span class="number">10</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">1</span>], [<span class="number">10</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">1</span>],</span><br><span class="line">            [<span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], [<span class="number">12</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">            [<span class="number">3</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], [<span class="number">12</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">3</span>, <span class="number">1</span>],</span><br><span class="line">            [<span class="number">6</span>, <span class="number">4</span>, <span class="number">1</span>], [<span class="number">5</span>, <span class="number">4</span>], [<span class="number">4</span>, <span class="number">1</span>, <span class="number">1</span>], [<span class="number">5</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_points</span>(<span class="params">points: np.array</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">    <span class="comment"># print array in console</span></span><br><span class="line">    <span class="keyword">if</span> points[<span class="number">0</span>, <span class="number">0</span>] == <span class="number">-2</span>:</span><br><span class="line">        print(<span class="string">"ERROR\n"</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            <span class="keyword">if</span> points[i, j] &gt;= <span class="number">1</span>:</span><br><span class="line">                print(<span class="string">'█'</span>, end=<span class="string">''</span>)</span><br><span class="line">            <span class="keyword">elif</span> points[i, j] == <span class="number">1</span>:</span><br><span class="line">                print(<span class="string">'■'</span>, end=<span class="string">''</span>)</span><br><span class="line">            <span class="keyword">elif</span> points[i, j] == <span class="number">0</span>:</span><br><span class="line">                print(<span class="string">'.'</span>, end=<span class="string">''</span>)</span><br><span class="line">            <span class="keyword">elif</span> points[i, j] == <span class="number">-1</span>:</span><br><span class="line">                print(<span class="string">'×'</span>, end=<span class="string">''</span>)</span><br><span class="line">        print()</span><br><span class="line">    print()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">horizontal_put</span>(<span class="params">points: np.array, x: <span class="built_in">int</span>, y0: <span class="built_in">int</span>, y1: <span class="built_in">int</span></span>) -&gt; np.array:</span></span><br><span class="line">    <span class="comment"># the next position of current array is already occupied</span></span><br><span class="line">    <span class="keyword">if</span> y1 + <span class="number">1</span> &lt; n <span class="keyword">and</span> np.<span class="built_in">min</span>(points[x, y0:y1 + <span class="number">1</span>]) &gt;= <span class="number">1</span>:</span><br><span class="line">        points[<span class="number">0</span>, <span class="number">0</span>] = <span class="number">-3</span></span><br><span class="line">        <span class="keyword">return</span> points</span><br><span class="line">    <span class="comment"># some positions of current array are inaccessible</span></span><br><span class="line">    <span class="keyword">if</span> np.<span class="built_in">min</span>(points[x, y0:y1]) == <span class="number">-1</span> <span class="keyword">or</span> (y1 &lt; n <span class="keyword">and</span> points[x, y1] &gt; <span class="number">0</span>):</span><br><span class="line">        points[<span class="number">0</span>, <span class="number">0</span>] = <span class="number">-2</span></span><br><span class="line">        <span class="keyword">return</span> points</span><br><span class="line">    <span class="comment"># set all positions of current array occupied</span></span><br><span class="line">    points[x, y0:y1] = <span class="number">1</span></span><br><span class="line">    <span class="comment"># set the next position of current array inaccessible</span></span><br><span class="line">    <span class="keyword">if</span> y1 &lt; n:</span><br><span class="line">        points[x, y1] = <span class="number">-1</span></span><br><span class="line">    <span class="keyword">return</span> points</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">vertical_put</span>(<span class="params">points: np.array</span>) -&gt; np.array:</span></span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        x = <span class="number">0</span></span><br><span class="line">        <span class="comment"># this column is already finished</span></span><br><span class="line">        <span class="keyword">if</span> points[n - <span class="number">1</span>, y] != <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">for</span> i, nums <span class="keyword">in</span> <span class="built_in">enumerate</span>(vertical[y]):</span><br><span class="line">            <span class="comment"># find next begin position of this column</span></span><br><span class="line">            <span class="keyword">while</span> x &lt; n <span class="keyword">and</span> points[x, y] &lt;= <span class="number">0</span>:</span><br><span class="line">                x += <span class="number">1</span></span><br><span class="line">            <span class="comment"># at the end of this column</span></span><br><span class="line">            <span class="keyword">if</span> x == n:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="comment"># goto the end position of current array</span></span><br><span class="line">            <span class="keyword">if</span> points[x, y] == <span class="number">2</span>:</span><br><span class="line">                x += nums</span><br><span class="line">            <span class="comment"># not enough positions to put current array</span></span><br><span class="line">            <span class="keyword">elif</span> points[x, y] == <span class="number">1</span> <span class="keyword">and</span> x + nums - <span class="number">1</span> &gt;= n:</span><br><span class="line">                points[<span class="number">0</span>, <span class="number">0</span>] = <span class="number">-2</span></span><br><span class="line">                <span class="keyword">return</span> points</span><br><span class="line">            <span class="comment"># set positions of current array occupied</span></span><br><span class="line">            <span class="keyword">elif</span> points[x, y] == <span class="number">1</span>:</span><br><span class="line">                points[x, y] = <span class="number">2</span></span><br><span class="line">                points[x + <span class="number">1</span>:x + nums, y] = <span class="number">1</span></span><br><span class="line">                <span class="comment"># set the next position of current array inaccessible</span></span><br><span class="line">                <span class="keyword">if</span> x + nums &lt; n:</span><br><span class="line">                    points[x + nums, y] = <span class="number">-1</span></span><br><span class="line">                <span class="comment"># this is the last array and set all rest positions inaccessible</span></span><br><span class="line">                <span class="keyword">if</span> i + <span class="number">1</span> == <span class="built_in">len</span>(vertical[y]) <span class="keyword">and</span> x + nums &lt; n:</span><br><span class="line">                    points[x + nums:, y] = <span class="number">-1</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> points</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">search</span>(<span class="params">points: np.array, x: <span class="built_in">int</span>, y: <span class="built_in">int</span>, k: <span class="built_in">int</span></span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">    <span class="keyword">global</span> is_solved, ans_points</span><br><span class="line">    <span class="comment"># solution is found</span></span><br><span class="line">    <span class="keyword">if</span> x == n:</span><br><span class="line">        print_points(points)</span><br><span class="line">        ans_points = points.copy()</span><br><span class="line">        is_solved = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># the last position of this row can start this array</span></span><br><span class="line">    j_end = n - <span class="built_in">sum</span>(horizontal[x][k:]) - (<span class="built_in">len</span>(horizontal[x]) - k - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(y, j_end + <span class="number">1</span>):</span><br><span class="line">        <span class="comment"># the previous position of current array is occupied</span></span><br><span class="line">        <span class="keyword">if</span> j &gt;= <span class="number">1</span> <span class="keyword">and</span> points[x, j - <span class="number">1</span>] &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># create a copy</span></span><br><span class="line">        j1 = j + horizontal[x][k]</span><br><span class="line">        new_points = points.copy()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># try to put current array into positions row[x] column[j-j1]</span></span><br><span class="line">        new_points = horizontal_put(new_points, x, j, j1)</span><br><span class="line">        <span class="comment"># error code -2</span></span><br><span class="line">        <span class="keyword">if</span> new_points[<span class="number">0</span>, <span class="number">0</span>] == <span class="number">-2</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="comment"># error code -3</span></span><br><span class="line">        <span class="keyword">elif</span> new_points[<span class="number">0</span>, <span class="number">0</span>] == <span class="number">-3</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># check and put arrays in columns</span></span><br><span class="line">        new_points = vertical_put(new_points)</span><br><span class="line">        <span class="keyword">if</span> new_points[<span class="number">0</span>, <span class="number">0</span>] == <span class="number">-2</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># this is the last array of this row, but some rest positions of this row are still occupied</span></span><br><span class="line">        <span class="keyword">if</span> k + <span class="number">1</span> == <span class="built_in">len</span>(</span><br><span class="line">                horizontal[x]) <span class="keyword">and</span> j1 &lt; n <span class="keyword">and</span> np.<span class="built_in">max</span>(new_points[x, j1:]) &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># recur to next</span></span><br><span class="line">        <span class="keyword">if</span> k + <span class="number">1</span> == <span class="built_in">len</span>(horizontal[x]):</span><br><span class="line">            search(new_points, x + <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            search(new_points, x, j1 + <span class="number">1</span>, k + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># solution is already found</span></span><br><span class="line">        <span class="keyword">if</span> is_solved:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">search(np.zeros((n, n), dtype=np.<span class="built_in">int</span>), <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">ans_points[ans_points &gt; <span class="number">0</span>] = <span class="number">255</span></span><br><span class="line">ans_points[ans_points &lt;= <span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">im = Image.fromarray(ans_points.astype(np.uint8), <span class="string">"L"</span>)</span><br><span class="line">im.show()</span><br><span class="line"><span class="comment"># im.save("level_32/python.jpg")</span></span><br></pre></td></tr></tbody></table></figure><p><strong>Output</strong><br><a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/rock/warmup.txt">warmup.txt</a></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">██×.█×.██</span><br><span class="line">█×.███××█</span><br><span class="line">×.█████××</span><br><span class="line">.███████×</span><br><span class="line">█████████</span><br><span class="line">×××███×××</span><br><span class="line">██×███×██</span><br><span class="line">██×███×██</span><br><span class="line">██×███×██</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><a target="_blank" rel="noopener" href="http://www.pythonchallenge.com/pc/rock/up.txt">up.text</a></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">...................███×██×......</span><br><span class="line">..................████████×.....</span><br><span class="line">.................██████████×....</span><br><span class="line">.................███×××█××█×....</span><br><span class="line">.................█████×██×█×....</span><br><span class="line">.................█████×██×█×....</span><br><span class="line">................████××.█×.█×....</span><br><span class="line">.............███████████████×...</span><br><span class="line">...........███████████████████×.</span><br><span class="line">..........██████×██████████████×</span><br><span class="line">.........██████×..×.█×██████████</span><br><span class="line">........███████×..██×.█×████████</span><br><span class="line">........██████×█×█×██××.█×█×█××█</span><br><span class="line">........█████×.×█×.████××.×.×..█</span><br><span class="line">........█████×████×█×████×█×█×█×</span><br><span class="line">........█████×××█×█×.×████████××</span><br><span class="line">........×█████×██××█×.×████████×</span><br><span class="line">.........██████××█××██×××█×███××</span><br><span class="line">.........×██████×███××██××.××█××</span><br><span class="line">..........×██████×××█×××█████×××</span><br><span class="line">█×.........×██████×.███×××××××××</span><br><span class="line">██×.........×███████×××██×.×××××</span><br><span class="line">███×.███×..██████████×████××××××</span><br><span class="line">█████████×████████████××××█×××××</span><br><span class="line">██████████████████████×...█×××××</span><br><span class="line">×█████████████████████×████×××××</span><br><span class="line">××█××█████████████████××××█×××××</span><br><span class="line">×××██××████████×█████×....█×××××</span><br><span class="line">××××××××██×××××██××××.████××××××</span><br><span class="line">××××××××××█████××██×█×××█×××××××</span><br><span class="line">×××××××××××××××××××█████××××××××</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>输入“python.html”到下一页面，直接搜索下面那段话 “Free” as in “Free speech”, not as in "free…<br>了解到“Free as in beer”指免费软件，“Free as in speech”指开源软件，答案就是“beer”。</p><h2 id="level-33-remove-light-2020-12-25">level_33_remove light_2020.12.25</h2><p>今天圣诞节嘞，圣诞快乐🎄！然而并没有收到礼物/(ㄒoㄒ)/~~<br><strong>🔑Solution</strong><br>不明白为什么32关那么难,33关又正常了…小小吐槽一下<br>这一关就是根据网页提示得到beer2.png图片,保存到本地,打开,发现图片是138*138的正方形<br>之前的网页源代码提示,"如果你被光蒙蔽了双眼，用它的力量移除它的力量。然后在灰烬中，另一个真相将向你光明正大地展示。“额,这句话真有哲理(●’◡’●)<br>总之,是之后用im.getdata()查看图片的灰度值,找到最大的两个数c0,c1,把等于c0,c1的数都变为255(白色),把小于的数都变成0(黑色),然后再删除等于c0和c1的数,得到的列表长度依然是一个平方数,之后需要重复操作33次,得到33张图片,发现33张图片里几张被方框括起来了,按顺序拼接,于是答案就为"gremlins”<br><strong>学习</strong></p><ul><li>最后一关的输出我用了红色和绿色来美化输出哦,还回想起了<code>center(10,'*')</code></li><li>numpy可能要学习一下<ul><li><code>data_np = np.array(data_list, dtype=np.uint8).reshape(n, n)</code>把列表搞成n*n的矩阵</li><li><code>data_np[data_np &gt;= max_2] = 255</code>可以直接把矩阵里大于某个数的值重新赋值<br><strong>💻Code</strong></li></ul></li></ul><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mkdir</span>(<span class="params">path</span>):</span></span><br><span class="line">    <span class="comment"># 创建文件夹函数</span></span><br><span class="line">    folder = os.path.exists(path)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> folder:</span><br><span class="line">        os.makedirs(path)</span><br><span class="line">        print(<span class="string">f"---new folder <span class="subst">{path}</span> created---"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mkdir(<span class="string">'output/level_33'</span>)</span><br><span class="line">im = Image.<span class="built_in">open</span>(<span class="string">'assets/beer2.png'</span>)</span><br><span class="line">data_list = <span class="built_in">list</span>(im.getdata())</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">33</span>):</span><br><span class="line">    print(<span class="string">f'\033[31m开始处理第<span class="subst">{i+<span class="number">1</span>}</span>张图片\033[0m'</span>)</span><br><span class="line">    max_number = heapq.nlargest(<span class="number">2</span>, <span class="built_in">set</span>(data_list))</span><br><span class="line">    print(<span class="string">f"data中最大的两个数：<span class="subst">{max_number}</span>"</span>)</span><br><span class="line">    max_2 = max_number[<span class="number">1</span>]</span><br><span class="line">    length = <span class="built_in">len</span>(data_list)</span><br><span class="line">    n = <span class="built_in">int</span>(math.sqrt(<span class="built_in">len</span>(data_list)))</span><br><span class="line">    print(<span class="string">f'列表总长度：<span class="subst">{length}</span>'</span>)</span><br><span class="line">    print(<span class="string">f'图片大小:<span class="subst">{n}</span>*<span class="subst">{n}</span>'</span>)</span><br><span class="line">    data_np = np.array(data_list, dtype=np.uint8).reshape(n, n)</span><br><span class="line">    data_np[data_np &gt;= max_2] = <span class="number">255</span></span><br><span class="line">    data_np[data_np &lt; max_2] = <span class="number">0</span></span><br><span class="line">    data_list = [x <span class="keyword">for</span> x <span class="keyword">in</span> data_list <span class="keyword">if</span> x &lt; max_2]</span><br><span class="line">    im1 = Image.new(<span class="string">'L'</span>, (n, n))</span><br><span class="line">    im = Image.fromarray(data_np, <span class="string">"L"</span>)</span><br><span class="line">    im.save(<span class="string">f'output/level_33/<span class="subst">{i+<span class="number">1</span>}</span>.png'</span>)</span><br><span class="line">    print(<span class="string">f'\033[32m第<span class="subst">{i+<span class="number">1</span>}</span>张图片成功保存至本地\033[0m'</span>)</span><br><span class="line">    print()</span><br></pre></td></tr></tbody></table></figure><p><strong>Output</strong><br><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201225110813-2020-12-25.png" alt="生成的33张图"></p><p>撒花完结!!!<br><img src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201225111138-2020-12-25.png" alt=""></p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="mailto:achuan-2@outlook.com">Achuan-2</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://achuan-2.github.io/posts/c134.html">https://achuan-2.github.io/posts/c134.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://achuan-2.github.io" target="_blank">Achuan-2</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/python%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0/">python基础练习</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201225124223-2020-12-25.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/posts/a881.html"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">阿巛的Hexo博客搭建</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">Achuan-2</div><div class="author-info__description">一条没有故事的巛</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Achuan-2" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:achuan-2@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://www.zhihu.com/people/achuan-2" target="_blank" title="Zhihu"><i class="fab fa-zhihu"></i></a><a class="social-icon" href="https://www.yuque.com/achuan-2" target="_blank" title="Yuque"><i class="fas fa-crow"></i></a><a class="social-icon" href="https://space.bilibili.com/349243695" target="_blank" title="Bilibili"><i class="fas fa-video"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">世间的事总是那么孤独，但只要星星还在闪耀，一切就没有关系。只要闭上眼睛说，“闪闪发亮，闪闪发亮”就好了，这么以来就会有许多星星出现啦！<div class="twopeople"><div class="twopeople"><div class="container" style="height:200px"><canvas class="illo" width="800" height="800" style="max-width:200px;max-height:200px;touch-action:none;width:640px;height:640px"></canvas></div><script src="https://cdn.guole.fun/js/twopeople1.js"></script><script src="https://cdn.guole.fun/js/zdog.dist.js"></script><script id="rendered-js" src="https://cdn.guole.fun/js/twopeople.js"></script><style>.twopeople{margin:0;align-items:center;justify-content:center;text-align:center}canvas{display:block;margin:0 auto;cursor:move}</style></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#level-0-2020-10-28"><span class="toc-text">level_0_2020.10.28</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-1-map-2020-10-27"><span class="toc-text">level_1_map_2020.10.27</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-2-ocr-2020-10-28"><span class="toc-text">level_2_ocr_2020.10.28</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-3-equality-2020-10-29"><span class="toc-text">level 3_equality_2020.10.29</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-4-linkedlist-2020-10-30"><span class="toc-text">level_4_linkedlist_2020.10.30</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-5-peak-2020-10-31"><span class="toc-text">level_5_peak_2020.10.31</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-6-channel-2020-11-1"><span class="toc-text">level_6_channel_2020.11.1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-7-oxygen-2020-11-2"><span class="toc-text">level_7_oxygen_2020.11.2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-8-integrity-2020-11-3"><span class="toc-text">level 8_integrity_2020.11.3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-9-good-2020-11-4"><span class="toc-text">level_9_good_2020.11.4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-10-bull-2020-11-5"><span class="toc-text">level_10_bull_2020.11.5</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-11-5808-pillow-2020-11-6"><span class="toc-text">level_11_5808&amp;pillow_2020.11.6</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%96%8ALearned%E7%9A%84%E7%9F%A5%E8%AF%86-pillow"><span class="toc-text">🖊Learned的知识-pillow</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E6%89%93%E5%BC%80%EF%BC%8C%E4%BF%9D%E5%AD%98"><span class="toc-text">图像打开，保存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E5%88%87%E7%89%87"><span class="toc-text">图片切片</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E7%BC%A9%E6%94%BE"><span class="toc-text">图片缩放</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8matplotlib-pyplot"><span class="toc-text">使用matplotlib.pyplot</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%9B%BE%E5%83%8F"><span class="toc-text">新建图像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A"><span class="toc-text">高斯模糊</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%AD%97%E6%AF%8D%E9%AA%8C%E8%AF%81%E7%A0%81%E5%9B%BE%E7%89%87"><span class="toc-text">生成字母验证码图片</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-12-evil-2020-11-7"><span class="toc-text">level_12_evil_2020.11.7</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-13-XML-RPC-2020-11-8"><span class="toc-text">level_13_XML-RPC_2020.11.8</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-14-italy-2020-11-9"><span class="toc-text">level_14_italy_2020.11.9</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-15-datetime-2020-11-10"><span class="toc-text">level_15_datetime _2020.11.10</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-16-ImageChops-numpy-roll-2020-11-11"><span class="toc-text">level_16_ImageChops &amp; numpy.roll_2020.11.11</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-17-cookie-urllib-parse-2020-11-12"><span class="toc-text">level_17_cookie &amp; urllib.parse_2020.11.12</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-18-ballons-2020-11-13"><span class="toc-text">level_18_ballons_2020.11.13</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-19-bin-2020-11-14"><span class="toc-text">level_19_bin_2020.11.14</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-20-idiot2-2020-11-15"><span class="toc-text">level_20_idiot2_2020.11.15</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-21-2020-11-17"><span class="toc-text">level_21_2020.11.17</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-22-2020-11-17"><span class="toc-text">level_22_2020.11.17</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-23-2020-12-15"><span class="toc-text">level_23_2020.12.15</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-24-maze-2020-12-16"><span class="toc-text">level_24_maze_2020.12.16</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-25-wave%E6%8B%BC%E5%9B%BE-2020-12-17"><span class="toc-text">level_25_wave拼图_2020.12.17</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-26-md5-2020-12-18"><span class="toc-text">level_26_md5_2020.12.18</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-27-between-the-tables-2020-12-19"><span class="toc-text">level_27_between the tables_2020.12.19</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-28-many-pairs-ring-ring-2020-12-20"><span class="toc-text">level_28_many pairs ring-ring_2020.12.20</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-29-silence-2020-12-21"><span class="toc-text">level_29_silence_2020.12.21</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-30-%E5%9B%BE%E7%89%87%E7%BF%BB%E8%BD%AC%E8%B4%A8%E6%95%B0%E4%B9%8B%E7%A7%AF-2020-12-22"><span class="toc-text">level_30_图片翻转质数之积_2020.12.22</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-31-Mandelbrot-set-2020-12-23"><span class="toc-text">level_31_Mandelbrot set_2020.12.23</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-32-%E5%88%BB%E5%8D%B0-2020-12-24"><span class="toc-text">level_32_刻印_2020.12.24</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#level-33-remove-light-2020-12-25"><span class="toc-text">level_33_remove light_2020.12.25</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/8dd0.html" title="Github Profile Readme美化效果汇总"><img src="https://cdn.jsdelivr.net/gh/Achuan-2/Achuan-2/assets/github-contribution-grid-snake.svg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Github Profile Readme美化效果汇总"></a><div class="content"><a class="title" href="/posts/8dd0.html" title="Github Profile Readme美化效果汇总">Github Profile Readme美化效果汇总</a><time datetime="2021-10-04T09:15:53.000Z" title="发表于 2021-10-04 17:15:53">2021-10-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/840d.html" title="解决使用代理时 Win10 UWP 应用无法联网问题"><img src="https://b3logfile.com/siyuan/1610205759005/assets/image-20210920101647-1tdionx.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="解决使用代理时 Win10 UWP 应用无法联网问题"></a><div class="content"><a class="title" href="/posts/840d.html" title="解决使用代理时 Win10 UWP 应用无法联网问题">解决使用代理时 Win10 UWP 应用无法联网问题</a><time datetime="2021-09-20T02:14:57.000Z" title="发表于 2021-09-20 10:14:57">2021-09-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/b8c8.html" title="GitHub 提交代码时 emoji 表情的使用"><img src="https://b3logfile.com/siyuan/1610205759005/assets/image-20211004232022-yqx105q.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="GitHub 提交代码时 emoji 表情的使用"></a><div class="content"><a class="title" href="/posts/b8c8.html" title="GitHub 提交代码时 emoji 表情的使用">GitHub 提交代码时 emoji 表情的使用</a><time datetime="2021-08-11T14:01:46.000Z" title="发表于 2021-08-11 22:01:46">2021-08-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/e98d.html" title="不发朋友圈的人"><img src="https://b3logfile.com/siyuan/1610205759005/assets/alone-20211004233107-7iz2w1q.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="不发朋友圈的人"></a><div class="content"><a class="title" href="/posts/e98d.html" title="不发朋友圈的人">不发朋友圈的人</a><time datetime="2021-06-17T02:51:17.000Z" title="发表于 2021-06-17 10:51:17">2021-06-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/80a3.html" title="外公再见">外公再见</a><time datetime="2021-06-17T02:50:38.000Z" title="发表于 2021-06-17 10:50:38">2021-06-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021<i id="heartbeat" class="fa fas fa-heartbeat"></i> Achuan-2</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://achuan-2.github.io/">blog</a>!</div></div><head><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></head></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button><button id="go-bottom" type="button" title="rightside.back_to_bottom" aria-hidden="true"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class="js-pjax"><script>(()=>{const t=document.getElementById("twikoo-count"),o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo-achuan-2.vercel.app",region:""},null))},e=()=>{twikoo.getCommentsCount({envId:"https://twikoo-achuan-2.vercel.app",region:"",urls:[window.location.pathname],includeReply:!1}).then((function(o){t.innerText=o[0].count})).catch((function(t){console.error(t)}))},n=(n=!1)=>{"object"==typeof twikoo?(o(),n&&t&&setTimeout(e,0)):getScript("https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js").then(()=>{o(),n&&t&&setTimeout(e,0)})};n(!0)})()</script></div><script>window.addEventListener("load",()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++){t+="<div class='aside-list-item'>";{const a="data-lazy-src";t+=`<a href='${e[n].url}' class='thumbnail'><img ${a}='${e[n].avatar}' alt='${e[n].nick}'></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}'>${e[n].content}</a>\n        <div class='name'><span>${e[n].nick} / </span><time datetime="${e[n].date}">${btf.diffDate(e[n].date,!0)}</time></div>\n        </div></div>`}else t+="没有评论";let n=document.querySelector("#card-newest-comments .aside-list");n.innerHTML=t,window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("twikoo-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{twikoo.getRecentComments({envId:"https://twikoo-achuan-2.vercel.app",region:"",pageSize:6,includeReply:!0}).then((function(t){const n=t.map(e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()};var t});saveToLocal.set("twikoo-newest-comments",JSON.stringify(n),10/1440),e(n)})).catch((function(e){document.querySelector("#card-newest-comments .aside-list").innerHTML="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof twikoo?t():getScript("https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js").then(t)})()}};t(),document.addEventListener("pjax:complete",t)})</script><script src="/js/cursor.js"></script><script src="https://cdn.jsdelivr.net/gh/xiabo2/CDN@latest/fishes.js"></script><div class="aplayer no-destroy" data-id="6915313708" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="random" data-preload="auto" data-autoplay="false" muted></div><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script src="/js/weather.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/SerokSSR/cdn/meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.removeEventListener("scroll",window.tocScrollFn),window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script data-pjax>function history_calendar_injector_config(){var i=document.getElementsByClassName("sticky_layout")[0];console.log("已挂载history_calendar"),i.insertAdjacentHTML("afterbegin",'<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>那年今日</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>')}document.getElementsByClassName("sticky_layout")[0]&&"/"===location.pathname&&history_calendar_injector_config()</script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script data-pjax>if(document.getElementById("recent-posts")&&"/"===location.pathname){var parent=document.getElementById("recent-posts"),child='<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://achuan-2.github.io/categories/树洞/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍃 树洞 (4)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://achuan-2.github.io/categories/Python/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🎮 折腾致死 (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://achuan-2.github.io/categories/折腾致死/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🐱‍👓 折腾致死 (4)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://achuan-2.github.io/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';console.log("已挂载magnet"),parent.insertAdjacentHTML("afterbegin",child)}</script><style>#catalog_magnet{flex-wrap:wrap;display:flex;width:100%;justify-content:space-between;padding:10px 10px 0 10px;align-content:flex-start}.magnet_item{flex-basis:calc(50% - 5px);background:#f2f2f2;margin-bottom:10px;border-radius:8px;transition:all .2s ease-in-out}.magnet_item:hover{background:#49b1f5}.magnet_link_more{color:#555}.magnet_link{color:#000}.magnet_link:hover{color:#fff}@media screen and (max-width:600px){.magnet_item{flex-basis:100%}}.magnet_link_context{display:flex;padding:10px;font-size:16px;transition:all .2s ease-in-out}.magnet_link_context:hover{padding:10px 20px}</style><style></style><script data-pjax>function butterfly_clock_injector_config(){var e=document.getElementsByClassName("aside-content")[0];console.log("已挂载butterfly_clock"),e.insertAdjacentHTML("afterbegin",'<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img id="card-clock-loading" src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-clock/clock/images/weather/loading.gif" style="height: 120px; width: 90%;position:absolute;top: 0px;left:10px;" data-ll-status="loading" class="entered loading"></div></div></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_clock_injector_config()</script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax src="https://cdn.jsdelivr.net/npm/hexo-butterfly-clock/lib/clock.min.js"></script><script data-pjax>function butterfly_swiper_injector_config(){var s=document.getElementById("recent-posts");console.log("已挂载butterfly_swiper"),s.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="posts/c134.html" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/Achuan-2/PicBed/assets/20201225124223-2020-12-25.png" alt="" onerror="this.src=https://cdn.jsdelivr.net/npm/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2020-11-14</span><a class="blog-slider__title" href="posts/c134.html" alt="">The Python Challenge Daily Record</a><div class="blog-slider__text">Python Challenge是首个谜语编程网站。挑战者需要连续挑战33个需要编程才能解开的谜题以锻炼自己的编程能力。</div><a class="blog-slider__button" href="posts/c134.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="posts/8dd0.html" alt=""><img width="48" height="48" src="https://cdn.jsdelivr.net/gh/Achuan-2/Achuan-2/assets/github-contribution-grid-snake.svg" alt="" onerror="this.src=https://cdn.jsdelivr.net/npm/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-10-04</span><a class="blog-slider__title" href="posts/8dd0.html" alt="">Github Profile Readme美化效果汇总</a><div class="blog-slider__text">美化你的Github Profile</div><a class="blog-slider__button" href="posts/8dd0.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="posts/b8c8.html" alt=""><img width="48" height="48" src="https://b3logfile.com/siyuan/1610205759005/assets/image-20211004232022-yqx105q.png" alt="" onerror="this.src=https://cdn.jsdelivr.net/npm/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-08-11</span><a class="blog-slider__title" href="posts/b8c8.html" alt="">GitHub 提交代码时 emoji 表情的使用</a><div class="blog-slider__text">执行 `git commit` 时使用 emoji 为本次提交打上一个 “标签”， 使得此次 commit 的主要工作得到凸现，提高阅读体验，同时也能够当作标签功能使得其在整个提交历史中易于区分与查找。</div><a class="blog-slider__button" href="posts/b8c8.html" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.1.6/js/swiper.min.js"></script><script defer data-pjax src="https://cdn.jsdelivr.net/npm/hexo-butterfly-swiper/lib/swiper_init.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.js"></script><script data-pjax>function GithubCalendarConfig(){var t=document.getElementById("recent-posts");t&&"/"==location.pathname&&(console.log("已挂载github calendar"),t.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>')),GithubCalendar("https://python-github-calendar-api.vercel.app/api?Achuan-2",["#ebedf0","#d3ecdd","#8ddeb5","#bef5cb","#85e89d","#34d058","#28a745","#22863a","#176f2c","#165c26","#55bb8e"],"Achuan-2")}document.getElementById("recent-posts")&&GithubCalendarConfig()</script><style>#github_container{min-height:280px}@media screen and (max-width:650px){#github_container{min-height:0}}</style><style></style><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({model:{scale:1,hHeadPos:.5,vHeadPos:.618,jsonPath:"/live2dw/assets/koharu.model.json"},display:{superSample:2,position:"left",width:150,height:300,hOffset:0,vOffset:300},mobile:{show:!1,scale:.3},react:{opacity:.7,opacityOnHover:.2},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script></body></html>